<!DOCTYPE html>
<!-- saved from url=(0136)file:///C:/Users/troga/Documents/GitHub/Test/Culturekill/FPS%20Example%20%F0%9F%95%B9%EF%B8%8F%20Rosebud%20AI%20Vibe%20Code%20Games.html -->
<html lang="en" class="__variable_4bc053 __variable_a06722">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style class="adjust-screen-brightness" media="screen">html {
            filter: brightness(1.37) !important;
            }
        </style>
        <link rel="stylesheet" href="./culturekill_v1_files/18771a58428bd333.css" data-precedence="next">
        <link rel="stylesheet" href="./culturekill_v1_files/2249d5231136424b.css" data-precedence="next">
        <link rel="stylesheet" href="./culturekill_v1_files/42250e9a6aa57a1b.css" data-precedence="next">
        <link rel="stylesheet" href="./culturekill_v1_files/e37567df4e853a7e.css" data-precedence="next">
        <link rel="stylesheet" href="./culturekill_v1_files/a1a2e3aa145f3733.css" data-precedence="next">
        <link rel="stylesheet" href="./culturekill_v1_files/241004aef619d210.css" data-precedence="next">
        <link rel="stylesheet" href="./culturekill_v1_files/c9095c7091456256.css" data-precedence="next">
        <link rel="stylesheet" href="file:///C:/_next/static/css/18771a58428bd333.css" data-precedence="next">
        <link rel="stylesheet" href="file:///C:/_next/static/css/2249d5231136424b.css" data-precedence="next">
        <link rel="stylesheet" href="file:///C:/_next/static/css/42250e9a6aa57a1b.css" data-precedence="next">
        <link rel="stylesheet" href="file:///C:/_next/static/css/e37567df4e853a7e.css" data-precedence="next">
        <link rel="stylesheet" href="file:///C:/_next/static/css/a1a2e3aa145f3733.css" data-precedence="next">
        <link rel="stylesheet" href="file:///C:/_next/static/css/241004aef619d210.css" data-precedence="next">
        <link rel="stylesheet" href="file:///C:/_next/static/css/c9095c7091456256.css" data-precedence="next">
        <script async="" src="./culturekill_v1_files/gtm.js.download"></script><script type="text/javascript" async="" src="./culturekill_v1_files/events.js.download"></script><script type="text/javascript" async="" src="./culturekill_v1_files/js"></script><script type="text/javascript" async="" src="./culturekill_v1_files/js(1)"></script><script async="" src="./culturekill_v1_files/gtm.js.download"></script><script type="text/javascript" async="" src="./culturekill_v1_files/js(2)"></script><script type="text/javascript" async="" src="./culturekill_v1_files/identify_3255c1c6.js.download"></script><script type="text/javascript" async="" src="./culturekill_v1_files/js(3)"></script><script type="text/javascript" async="" src="./culturekill_v1_files/main.MTE0N2UyYjNkMzI.js.download" data-id="CNOCDH3C77U3N71L0DEG"></script><script type="text/javascript" async="" src="./culturekill_v1_files/events(1).js.download"></script><script async="" src="./culturekill_v1_files/gtm(1).js.download"></script><script src="./culturekill_v1_files/4bd1b696-584b158465405ea8(1).js.download" async=""></script><script src="./culturekill_v1_files/1684-a63482460a9bec04(1).js.download" async=""></script><script src="./culturekill_v1_files/main-app-5518523dddf30468(1).js.download" async=""></script><script src="./culturekill_v1_files/f01af2bd-f8997ca20a92dfa6.js.download" async=""></script><script src="./culturekill_v1_files/8687-c8810a24d87dcc82.js.download" async=""></script><script src="./culturekill_v1_files/3063-8eb5a88668120cd0.js.download" async=""></script><script src="./culturekill_v1_files/6588-29135acb0f5b9ca3.js.download" async=""></script><script src="./culturekill_v1_files/5152-7c6c77d0ed77d693.js.download" async=""></script><script src="./culturekill_v1_files/9613-1849c6977ef49989.js.download" async=""></script><script src="./culturekill_v1_files/1345-a9abb6dbecddd8ca.js.download" async=""></script><script src="./culturekill_v1_files/3153-2fb0cf2925aeac2a.js.download" async=""></script><script src="./culturekill_v1_files/3172-ceebf28d96bd2df8.js.download" async=""></script><script src="./culturekill_v1_files/2891-06798723b03e6ebe.js.download" async=""></script><script src="./culturekill_v1_files/layout-3df5ec43afef2d18.js.download" async=""></script><script src="./culturekill_v1_files/6874-460845bcf1779d2a.js.download" async=""></script><script src="./culturekill_v1_files/not-found-3c1e7064748acf6f.js.download" async=""></script><script src="./culturekill_v1_files/global-error-0fdc001233919117(1).js.download" async=""></script><script src="./culturekill_v1_files/7516-351584a0cde0a275.js.download" async=""></script><script src="./culturekill_v1_files/page-6fd441c63c286795.js.download" async=""></script><script>(self.__next_s=self.__next_s||[]).push([0,{"children":"\n                                (function(w,r){w._rwq=r;w[r]=w[r]||function(){(w[r].q=w[r].q||[]).push(arguments)}})(window,'rewardful');\n                            ","id":"rewardful-script"}])</script><script>(self.__next_s=self.__next_s||[]).push(["https://r.wdfl.co/rw.js",{"async":true,"data-rewardful":"eb25d1"}])</script><script src="./culturekill_v1_files/polyfills-42372ed130431b0a(1).js.download" nomodule=""></script><script id="rewardful-script">
            (function(w,r){w._rwq=r;w[r]=w[r]||function(){(w[r].q=w[r].q||[]).push(arguments)}})(window,'rewardful');
        </script><script async="true" data-rewardful="eb25d1" src="./culturekill_v1_files/rw.js.download"></script><script async="" src="./culturekill_v1_files/hotjar-3822970.js.download"></script><script type="text/javascript" async="" src="./culturekill_v1_files/f.txt"></script><script type="text/javascript" async="" src="./culturekill_v1_files/f(1).txt"></script><script async="" src="./culturekill_v1_files/modules.fd66acf0c05ce191d967.js.download" charset="utf-8"></script><script src="./culturekill_v1_files/js(4)" async=""></script><script src="./culturekill_v1_files/browser-perf.8417c6bba72228fa2e29.js.download"></script><script id="rewardful-script">
            (function(w,r){w._rwq=r;w[r]=w[r]||function(){(w[r].q=w[r].q||[]).push(arguments)}})(window,'rewardful');
        </script><script async="true" data-rewardful="eb25d1" src="./culturekill_v1_files/rw(1).js.download"></script><script async="" src="./culturekill_v1_files/hotjar-3822970(1).js.download"></script><script type="text/javascript" async="" src="./culturekill_v1_files/f(2).txt"></script><script type="text/javascript" async="" src="./culturekill_v1_files/f(3).txt"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="theme-color" content="black">
        <meta name="next-size-adjust" content="">
        <meta name="mobile-web-app-capable" content="yes">
        <link rel="canonical" href="https://rosebud.ai/">
        <meta name="x-ogp-key" content="b772733e-0d91-44f5-93ad-9d0ae979ba42">
        <title>FPS Example üïπÔ∏è Rosebud AI Vibe Code Games</title>
        <meta property="og:title" content="FPS Example üïπÔ∏è Rosebud AI Vibe Code Games">
        <meta property="og:image" content="https://rosebud.ai/assets/rosebud-og-img.png?timestamp=1749844301650">
        <meta property="og:image:height" content="630">
        <meta property="og:image:width" content="1200">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@Rosebud_AI">
        <meta name="twitter:title" content="FPS Example üïπÔ∏è Rosebud AI Vibe Code Games">
        <meta name="twitter:image" content="https://rosebud.ai/assets/rosebud-og-img.png?timestamp=1749844301650">
        <link rel="icon" href="file:///C:/icon-xg4ifa.ico?bb8c6c90c9f8e9a0" type="image/x-icon" sizes="48x48">
        <link rel="apple-touch-icon" href="file:///C:/apple-icon-xg4ifa.png?847505468c59a344" type="image/png" sizes="180x180">
        <script>(self.__next_s=self.__next_s||[]).push([0,{"children":"\n                                (function(w,r){w._rwq=r;w[r]=w[r]||function(){(w[r].q=w[r].q||[]).push(arguments)}})(window,'rewardful');\n                            ","id":"rewardful-script"}])</script><script>(self.__next_s=self.__next_s||[]).push(["https://r.wdfl.co/rw.js",{"async":true,"data-rewardful":"eb25d1"}])</script><script type="text/javascript" async="" src="./culturekill_v1_files/f(4).txt"></script><script async="" src="./culturekill_v1_files/hotjar-3822970(1).js.download"></script><script src="./culturekill_v1_files/js(5)" async=""></script>
    </head>
    <body>
        <script src="./culturekill_v1_files/webpack-ed025e750fd44fe2(1).js.download" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[87555,[],\"\"]\n3:I[31295,[],\"\"]\n4:I[69243,[\"5965\",\"static/chunks/f01af2bd-f8997ca20a92dfa6.js\",\"8687\",\"static/chunks/8687-c8810a24d87dcc82.js\",\"3063\",\"static/chunks/3063-8eb5a88668120cd0.js\",\"6588\",\"static/chunks/6588-29135acb0f5b9ca3.js\",\"5152\",\"static/chunks/5152-7c6c77d0ed77d693.js\",\"9613\",\"static/chunks/9613-1849c6977ef49989.js\",\"1345\",\"static/chunks/1345-a9abb6dbecddd8ca.js\",\"3153\",\"static/chunks/3153-2fb0cf2925aeac2a.js\",\"3172\",\"static/chunks/3172-ceebf28d96bd2df8.js\",\"2891\",\"static/chunks/2891-06798723b03e6ebe.js\",\"4944\",\"static/chunks/app/(app)/layout-3df5ec43afef2d18.js\"],\"\"]\n5:I[37760,[\"5965\",\"static/chunks/f01af2bd-f8997ca20a92dfa6.js\",\"8687\",\"static/chunks/8687-c8810a24d87dcc82.js\",\"3063\",\"static/chunks/3063-8eb5a88668120cd0.js\",\"6588\",\"static/chunks/6588-29135acb0f5b9ca3.js\",\"5152\",\"static/chunks/5152-7c6c77d0ed77d693.js\",\"9613\",\"static/chunks/9613-1849c6977ef49989.js\",\"1345\",\"static/chunks/1345-a9abb6dbecddd8ca.js\",\"3153\",\"static/chunks/3153-2fb0cf2925aeac2a.js\",\"3172\",\"static/chunks/3172-ceebf28d96bd2df8.js\",\"2891\",\"static/chunks/2891-06798723b03e6ebe.js\",\"4944\",\"static/chunks/app/(app)/layout-3df5ec43afef2d18.js\"],\"default\"]\n6:I[95483,[\"5965\",\"static/chunks/f01af2bd-f8997ca20a92dfa6.js\",\"8687\",\"static/chunks/8687-c8810a24d87dcc82.js\",\"3063\",\"static/chunks/3063-8eb5a88668120cd0.js\",\"6588\",\"static/chunks/6588-29135acb0f5b9ca3.js\",\"5152\",\"static/chunks/5152-7c6c77d0ed77d693.js\",\"9613\",\"static/chunks/9613-1849c6977ef49989.js\",\"1345\",\"static/chunks/1345-a9abb6dbecddd8ca.js\",\"3153\",\"static/chunks/3153-2fb0cf2925aeac2a.js\",\"3172\",\"static/chunks/3172-ceebf28d96bd2df8.js\",\"2891\",\"static/chunks/2891-06798723b03e6ebe.js\",\"4944\",\"static/chunks/app/(app)/layout-3df5ec43afef2d18.js\"],\"AppBanner\"]\n7:I[6874,[\"6874\",\"static/chunks/6874-460845bcf1779d2a.js\",\"914\",\"static/chunks/app/(app)/not-found-3c1e7064748acf6f.js\"],\"\"]\n8:I[29753,[\"6874\",\"static/chunks/6874-460845bcf1779d2a.js\",\"914\",\"static/chunks/app/(app)/not-found-3c1e7064748acf6f.js\"],\"ClientRedirect\"]\na:I[59665,[],\"MetadataBoundary\"]"])</script><script>self.__next_f.push([1,"\nc:I[59665,[],\"OutletBoundary\"]\nf:I[74911,[],\"AsyncMetadataOutlet\"]\n11:I[59665,[],\"ViewportBoundary\"]\n13:I[98385,[\"4219\",\"static/chunks/app/global-error-0fdc001233919117.js\"],\"default\"]\n14:\"$Sreact.suspense\"\n15:I[74911,[],\"AsyncMetadata\"]\n:HL[\"/_next/static/media/443896d591e4f761-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/4f05ba3a6752a328-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/18771a58428bd333.css\",\"style\"]\n:HL[\"/_next/static/css/2249d5231136424b.css\",\"style\"]\n:HL[\"/_next/static/css/42250e9a6aa57a1b.css\",\"style\"]\n:HL[\"/_next/static/css/e37567df4e853a7e.css\",\"style\"]\n:HL[\"/_next/static/css/a1a2e3aa145f3733.css\",\"style\"]\n:HL[\"/_next/static/css/241004aef619d210.css\",\"style\"]\n:HL[\"/_next/static/css/c9095c7091456256.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"8eRWyml6ERou35Wgzw1BK\",\"p\":\"\",\"c\":[\"\",\"p\",\"9a5a089c-dbf2-4e0f-83a6-49a671b76f62\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"(app)\",{\"children\":[\"p\",{\"children\":[[\"projectId\",\"9a5a089c-dbf2-4e0f-83a6-49a671b76f62\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true]}],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"(app)\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/18771a58428bd333.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/2249d5231136424b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/42250e9a6aa57a1b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"3\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/e37567df4e853a7e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"4\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/a1a2e3aa145f3733.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"__variable_4bc053 __variable_a06722\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"name\":\"mobile-web-app-capable\",\"content\":\"yes\"}],[\"$\",\"link\",null,{\"rel\":\"canonical\",\"href\":\"https://rosebud.ai/\"}],[\"$\",\"meta\",null,{\"name\":\"x-ogp-key\",\"content\":\"b772733e-0d91-44f5-93ad-9d0ae979ba42\"}],[[\"$\",\"$L4\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-1FHLBFMWCR\",\"strategy\":\"afterInteractive\",\"async\":true}],[\"$\",\"$L4\",null,{\"id\":\"google-analytics\",\"strategy\":\"afterInteractive\",\"children\":\"\\n                                window.dataLayer = window.dataLayer || [];\\n                                function gtag(){dataLayer.push(arguments);}\\n                                gtag('js', new Date());\\n                                gtag('config', 'G-1FHLBFMWCR');\\n                            \"}],[\"$\",\"$L4\",null,{\"id\":\"google-tag-manager\",\"strategy\":\"afterInteractive\",\"children\":\"\\n                                (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\\n                                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\\n                                j=d.createElement(s),dl=l!='dataLayer'?'\u0026l='+l:'';j.async=true;j.src=\\n                                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\\n                                })(window,document,'script','dataLayer','GTM-W7XHRXFL');\\n                            \"}],[\"$\",\"$L4\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=AW-410098193\",\"strategy\":\"afterInteractive\",\"async\":true}],[\"$\",\"$L4\",null,{\"id\":\"google-ads-1\",\"strategy\":\"afterInteractive\",\"children\":\"\\n                                window.dataLayer = window.dataLayer || [];\\n                                function gtag(){dataLayer.push(arguments);}\\n                                gtag('js', new Date());\\n                                gtag('config', 'AW-410098193');\\n                            \"}],[\"$\",\"$L4\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=AW-16550328878\",\"strategy\":\"afterInteractive\",\"async\":true}],[\"$\",\"$L4\",null,{\"id\":\"google-ads-2\",\"strategy\":\"afterInteractive\",\"children\":\"\\n                                window.dataLayer = window.dataLayer || [];\\n                                function gtag(){dataLayer.push(arguments);}\\n                                gtag('js', new Date());\\n                                gtag('config', 'AW-16550328878');\\n                            \"}],[\"$\",\"$L4\",null,{\"id\":\"hotjar-script\",\"strategy\":\"afterInteractive\",\"children\":\"\\n                                (function(h,o,t,j,a,r){\\n                                    h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};\\n                                    h._hjSettings={hjid:3822970,hjsv:6};\\n                                    a=o.getElementsByTagName('head')[0];\\n                                    r=o.createElement('script');r.async=1;\\n                                    r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;\\n                                    a.appendChild(r);\\n                                })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');\\n                            \"}],[\"$\",\"$L4\",null,{\"id\":\"rewardful-script\",\"strategy\":\"beforeInteractive\",\"children\":\"\\n                                (function(w,r){w._rwq=r;w[r]=w[r]||function(){(w[r].q=w[r].q||[]).push(arguments)}})(window,'rewardful');\\n                            \"}],[\"$\",\"$L4\",null,{\"async\":true,\"src\":\"https://r.wdfl.co/rw.js\",\"data-rewardful\":\"eb25d1\",\"strategy\":\"beforeInteractive\"}]]]}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"noscript\",null,{\"children\":[\"$\",\"iframe\",null,{\"src\":\"https://www.googletagmanager.com/ns.html?id=GTM-W7XHRXFL\",\"height\":\"0\",\"width\":\"0\",\"style\":{\"display\":\"none\",\"visibility\":\"hidden\"}}]}],[\"$\",\"$L5\",null,{\"children\":[[\"$\",\"$L6\",null,{}],[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"main\",null,{\"className\":\"not-found_NotFoundHeader____IYB\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"Sorry, this page isn't available.\"}],[\"$\",\"p\",null,{\"children\":[\"This URL may be broken, or this page may\",[\"$\",\"br\",null,{}],\"be deleted. \",[\"$\",\"$L7\",null,{\"href\":\"/\",\"children\":\"Click here\"}],\" for more games.\"]}],[\"$\",\"$L8\",null,{}]]}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/44fd010758438e0e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]]}]]}]]}],{\"children\":[\"p\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"projectId\",\"9a5a089c-dbf2-4e0f-83a6-49a671b76f62\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L9\",[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/241004aef619d210.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c9095c7091456256.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$Lc\",null,{\"children\":[\"$Ld\",\"$Le\",[\"$\",\"$Lf\",null,{\"promise\":\"$@10\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"iKF3GS8tu0_2x9IlP_qwF\",{\"children\":[[\"$\",\"$L11\",null,{\"children\":\"$L12\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$13\",[]],\"s\":false,\"S\":false}\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"$14\",null,{\"fallback\":null,\"children\":[\"$\",\"$L15\",null,{\"promise\":\"$@16\"}]}]\ne:null\n12:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1, maximum-scale=1\"}],[\"$\",\"meta\",\"2\",{\"name\":\"theme-color\",\"content\":\"black\"}]]\nd:null\n"])</script><script>self.__next_f.push([1,"17:I[17125,[\"5965\",\"static/chunks/f01af2bd-f8997ca20a92dfa6.js\",\"8687\",\"static/chunks/8687-c8810a24d87dcc82.js\",\"3063\",\"static/chunks/3063-8eb5a88668120cd0.js\",\"6588\",\"static/chunks/6588-29135acb0f5b9ca3.js\",\"6874\",\"static/chunks/6874-460845bcf1779d2a.js\",\"5152\",\"static/chunks/5152-7c6c77d0ed77d693.js\",\"9613\",\"static/chunks/9613-1849c6977ef49989.js\",\"3172\",\"static/chunks/3172-ceebf28d96bd2df8.js\",\"7516\",\"static/chunks/7516-351584a0cde0a275.js\",\"8813\",\"static/chunks/app/(app)/p/%5BprojectId%5D/page-6fd441c63c286795.js\"],\"default\"]\n18:T1279,"])</script><script>self.__next_f.push([1,"import * as THREE from 'three';\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { camera, scene } from 'renderer'; // Import camera and scene\nimport { damp } from 'maath/easing'; // Import damp for smooth animation\nexport let gunModel = null; // Export gunModel\nconst GUN_URL = 'https://play.rosebud.ai/assets/revolver.glb?SSQD';\nconst originalPosition = new THREE.Vector3(0.25, -0.3, -0.5); // Position: right, down, forward\nlet blowbackActive = false;\nlet blowbackStartTime = 0;\nconst BLOWBACK_DISTANCE = 0.15; // How far back it moves\nconst BLOWBACK_DURATION = 0.1; // Time to move back\nconst RETURN_DURATION = 0.3; // Time to return to original position\nlet muzzleFlashLight;\nconst FLASH_INTENSITY = 50; // Brightness of the flash\nconst FLASH_DURATION = 0.05; // How long the flash stays at max intensity\nconst FLASH_FADE_DURATION = 0.1; // How long it takes to fade out\nexport function loadGun() {\n    const loader = new GLTFLoader();\n    // Load the GLB model\n    loader.load(GUN_URL, (gltf) =\u003e {\n        gunModel = gltf.scene;\n        // Apply texture and configure materials\n        gunModel.traverse((child) =\u003e {\n            if (child.isMesh) {\n                child.castShadow = true; // Enable shadows if desired\n                // The new model has its own materials, so we don't need to apply custom ones.\n                // We can still tweak them if needed, e.g., child.material.metalness = 0.9;\n            }\n        });\n        // Scale and position the gun relative to the camera\n        gunModel.scale.set(1, 1, 1); // Made it slightly smaller\n        gunModel.position.copy(originalPosition); // Use stored original position\n        gunModel.rotation.set(0, Math.PI * -0.5, 0); // Point mostly forward\n        // Create Muzzle Flash Light\n        muzzleFlashLight = new THREE.PointLight(0xffa500, 0, 5, 2); // Orange-ish, intensity 0, distance 5, decay 2\n        muzzleFlashLight.position.set(0, 0.05, -0.4); // Position at the barrel end relative to the gun model\n        gunModel.add(muzzleFlashLight); // Add light as child of the gun\n        // Attach the gun model directly to the camera\n        camera.add(gunModel);\n        // Add the camera (which now contains the gun) to the main scene\n        // Note: The camera is usually already added, but ensure it is.\n        if (!scene.children.includes(camera)) {\n             scene.add(camera); // Ensure camera is part of the scene graph\n        }\n        console.log('Gun model loaded and attached to camera.');\n    }, undefined, (error) =\u003e {\n        console.error('Error loading gun model:', error);\n    });\n}\n\n// Function to trigger the blowback animation\nexport function animateBlowback() {\n    if (!gunModel) return; // Only proceed if gun exists\n    // Always restart the animation timer and state\n    blowbackActive = true;\n    blowbackStartTime = performance.now() / 1000; // Reset start time in seconds\n    // Always reset muzzle flash\n    if (muzzleFlashLight) {\n        muzzleFlashLight.intensity = FLASH_INTENSITY;\n    }\n}\n// Function to update the gun's position and muzzle flash animation\nexport function updateGunAnimation(dt) {\n    const now = performance.now() / 1000;\n    const elapsedTime = now - blowbackStartTime;\n    // --- Blowback Animation ---\n    if (gunModel \u0026\u0026 blowbackActive) {\n        const targetZ = originalPosition.z + BLOWBACK_DISTANCE;\n    if (elapsedTime \u003c= BLOWBACK_DURATION) {\n        // Move backward\n        damp(gunModel.position, 'z', targetZ, BLOWBACK_DURATION / 2, dt); // Use damp for smoother transition\n    } else if (elapsedTime \u003c= BLOWBACK_DURATION + RETURN_DURATION) {\n        // Return to original position - Adjust the lambda (smoothing factor) for a smoother return\n        damp(gunModel.position, 'z', originalPosition.z, RETURN_DURATION * 0.25, dt); // Made lambda smaller for more smoothing\n    } else {\n        // Animation finished\n            gunModel.position.z = originalPosition.z; // Ensure it's exactly back\n            blowbackActive = false;\n        }\n    }\n    // --- Muzzle Flash Fade ---\n    if (muzzleFlashLight \u0026\u0026 muzzleFlashLight.intensity \u003e 0) {\n        const flashElapsedTime = now - blowbackStartTime; // Use the same timer for simplicity\n        if (flashElapsedTime \u003e FLASH_DURATION) {\n            // Start fading after the initial flash duration\n            const fadeProgress = Math.min(1, (flashElapsedTime - FLASH_DURATION) / FLASH_FADE_DURATION);\n            muzzleFlashLight.intensity = THREE.MathUtils.lerp(FLASH_INTENSITY, 0, fadeProgress);\n        }\n        // Ensure intensity is exactly 0 after fade duration\n        if (flashElapsedTime \u003e= FLASH_DURATION + FLASH_FADE_DURATION) {\n             muzzleFlashLight.intensity = 0;\n        }\n    }\n}"])</script><script>self.__next_f.push([1,"19:T1992,"])</script><script>self.__next_f.push([1,"import { state } from 'state'; // Import state to check for jetpack\nimport * as THREE from 'three';\nimport { Octree } from 'three/addons/math/Octree.js';\nimport { Capsule } from 'three/addons/math/Capsule.js';\n\nexport class SimplePhysics {\n  constructor(o={}){\n    this.GRAVITY=o.gravity??30;\n    this.STEPS_PER_FRAME=o.stepsPerFrame??5;\n    this.worldOctree=new Octree();\n    this.vector1=new THREE.Vector3();\n    this.vector2=new THREE.Vector3();\n    this.vector3=new THREE.Vector3();\n    this.playerCollider=null;\n    this.playerVelocity=new THREE.Vector3();\n    this.playerDirection=new THREE.Vector3();\n    this.playerOnFloor=false;\n    this.playerSpeed = 25; // Base speed on floor\n    this.spheres=[];\n    this.camera=o.camera??null;\n    this._key={};\n  }\n  initPlayer(){\n    this.playerCollider=new Capsule(new THREE.Vector3(0,0.35,0),new THREE.Vector3(0,1,0),0.35);\n  }\n  setKeyMap(map){ this._key=map; }\n  addSphere(mesh,pos,r){\n    const s={mesh,collider:new THREE.Sphere(pos,r),velocity:new THREE.Vector3()};\n    this.spheres.push(s);return s;\n  }\n  loadEnvironment(obj){ this.worldOctree.fromGraphNode(obj); return this; }\n  getForwardVector(){ if(!this.camera) return new THREE.Vector3(); this.camera.getWorldDirection(this.playerDirection);this.playerDirection.y=0;return this.playerDirection.normalize(); }\n  getSideVector(){ if(!this.camera) return new THREE.Vector3(); this.camera.getWorldDirection(this.playerDirection);this.playerDirection.y=0;this.playerDirection.normalize();return this.playerDirection.cross(this.camera.up); }\n  controls(dt){\n    const k=this._key; const speed=dt*(this.playerOnFloor ? this.playerSpeed : this.playerSpeed * 0.4);\n    // Mouse move is handled directly in main.js now\n    if(k.KeyW) this.playerVelocity.add(this.getForwardVector().multiplyScalar(speed));\n    if(k.KeyS) this.playerVelocity.add(this.getForwardVector().multiplyScalar(-speed));\n    if(k.KeyA) this.playerVelocity.add(this.getSideVector().multiplyScalar(-speed));\n    if(k.KeyD) this.playerVelocity.add(this.getSideVector().multiplyScalar(speed));\n    if (state.jetpackUnlocked \u0026\u0026 k.Space \u0026\u0026 state.jetpackFuel \u003e 0) {\n        // Jetpack flight\n        this.playerVelocity.y += 45 * dt; // Apply continuous upward force\n        if (this.playerVelocity.y \u003e 10) this.playerVelocity.y = 10; // Cap vertical speed\n        state.jetpackFuel -= 35 * dt; // Consume fuel over time\n        this.playerOnFloor = false; // Player is flying\n    } else if (this.playerOnFloor \u0026\u0026 k.Space) {\n        // Normal jump if jetpack isn't used or is out of fuel\n        this.playerVelocity.y = 15;\n    }\n  }\n  updatePlayer(dt){\n    let damping=Math.exp(-4*dt)-1;\n    if(!this.playerOnFloor){ this.playerVelocity.y-=this.GRAVITY*dt; damping*=0.1; }\n    this.playerVelocity.addScaledVector(this.playerVelocity,damping);\n    const deltaPos=this.playerVelocity.clone().multiplyScalar(dt);\n    this.playerCollider.translate(deltaPos);\n    // collisions\n    const res=this.worldOctree.capsuleIntersect(this.playerCollider);\n    this.playerOnFloor=false;\n    if(res){\n      this.playerOnFloor=res.normal.y\u003e0;\n      if(!this.playerOnFloor){ this.playerVelocity.addScaledVector(res.normal,-res.normal.dot(this.playerVelocity)); }\n      // Avoid penetration adjustments if depth is negligible to prevent jitter\n      if(res.depth \u003e= 1e-10){ this.playerCollider.translate(res.normal.multiplyScalar(res.depth)); }\n    }\n  }\n  updateSpheres(dt, collisionCallback) {\n    for(const s of this.spheres) {\n      if (s.collider.center.y \u003c -90) continue; // Skip inactive spheres\n      s.collider.center.addScaledVector(s.velocity, dt);\n      // Perform custom collision check (e.g., vs zombies) before world collision\n      if (collisionCallback) {\n        collisionCallback();\n      }\n      // If sphere is still active after custom check, then check against world\n      if (s.collider.center.y \u003e -90) {\n        const res = this.worldOctree.sphereIntersect(s.collider);\n        if (res) {\n          s.collider.center.set(0, -100, 0);\n          s.velocity.set(0, 0, 0);\n        }\n      }\n      \n      const damp = Math.exp(-1.5 * dt) - 1;\n      s.velocity.addScaledVector(s.velocity, damp);\n    }\n    for(const s of this.spheres) {\n        // Ghost Tracer: Smoothly move the visible mesh to the physics collider's position\n        s.mesh.position.lerp(s.collider.center, 0.3);\n        // Orient the laser mesh to point in the direction of its velocity\n        if (s.velocity.lengthSq() \u003e 0.001) { // Only update if moving\n            s.mesh.lookAt(s.mesh.position.clone().add(s.velocity));\n        }\n    }\n  }\n  teleportPlayerIfOob(){ if(!this.camera) return; if(this.camera.position.y\u003c=-25){ this.playerCollider.start.set(0,0.35,0);this.playerCollider.end.set(0,1,0);this.playerVelocity.set(0,0,0); this.camera.position.copy(this.playerCollider.end); this.camera.rotation.set(0,0,0); } }\n  updateStep(dt){\n    this.controls(dt);\n    this.updatePlayer(dt);\n    this.updateSpheres(dt, this.collisionCallback); // Pass callback\n    this.teleportPlayerIfOob();\n    if(this.camera) this.camera.position.copy(this.playerCollider.end);\n  }\n  updateAccum(dt, collisionCallback){\n    this.collisionCallback = collisionCallback; // Store callback for use in updateStep\n    const step = Math.min(dt, 0.1) / this.STEPS_PER_FRAME;\n    for(let i = 0; i \u003c this.STEPS_PER_FRAME; i++) this.updateStep(step);\n  }\n  /**\n   * Throws a sphere from a specified origin and direction.\n   * @param {number} idx Index of the sphere to throw.\n   * @param {number} mouseDt Time difference for impulse calculation.\n   * @param {THREE.Vector3} origin The world-space position to throw from.\n   * @param {THREE.Vector3} direction The world-space direction to throw in.\n   */\n  throwBall(idx, mouseDt, origin, direction) {\n    if (idx \u003c 0 || idx \u003e= this.spheres.length) return idx; // Bounds check\n    if (!origin || !direction) return idx; // Need origin and direction\n    const s = this.spheres[idx];\n    // Set the sphere's starting position slightly in front of the origin\n    s.collider.center.copy(origin).addScaledVector(direction, 0.2); // Start slightly ahead\n    // Calculate impulse safely\n    const timeDiff = Math.max(0, mouseDt); // Ensure mouseDt is non-negative\n    const imp = 200; // Increased velocity for laser-like effect\n    // Set velocity based on the provided direction and impulse\n    // Add a bit of the player's velocity so movement affects throws slightly\n    s.velocity.copy(direction).multiplyScalar(imp).addScaledVector(this.playerVelocity, 0.1);\n    return idx;\n  }\n}"])</script><script>self.__next_f.push([1,"1a:T1f34,"])</script><script>self.__next_f.push([1,"import * as THREE from 'three';\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { scene, camera } from 'renderer';\nimport { state } from 'state';\nimport { Capsule } from 'three/addons/math/Capsule.js';\nimport { playPlayerDamageSound } from 'audio';\nconst ZOMBIE_URL = 'https://play.rosebud.ai/assets/Zombie.glb?B4VO';\nlet zombieModel = null;\nexport const activeZombies = [];\nconst SPAWN_INTERVAL = 1.5; // Initial spawn interval in seconds\nlet spawnTimer = SPAWN_INTERVAL;\nexport function setupZombies() {\n    const loader = new GLTFLoader();\n    loader.load(ZOMBIE_URL, (gltf) =\u003e {\n        zombieModel = gltf.scene;\n        zombieModel.traverse(child =\u003e {\n            if (child.isMesh) {\n                child.castShadow = true;\n            }\n        });\n        console.log('Zombie model loaded.');\n    }, undefined, (error) =\u003e {\n        console.error('Error loading zombie model:', error);\n    });\n}\nfunction spawnZombie() {\n    if (!zombieModel || !state.physics) return;\n    const newZombieMesh = zombieModel.clone();\n    \n    // Spawn at a random position around the map\n    const radius = 40; // This is now the half-width of the spawn area\n    const x = (Math.random() - 0.5) * radius * 2; // Random x in [-40, 40]\n    const z = (Math.random() - 0.5) * radius * 2; // Random z in [-40, 40]\n    \n    // Ensure zombies don't spawn too close to the player's initial position\n    const MIN_SPAWN_DIST = 10;\n    if (Math.sqrt(x*x + z*z) \u003c MIN_SPAWN_DIST) {\n        const angle = Math.random() * Math.PI * 2;\n        newZombieMesh.position.set(\n            Math.cos(angle) * MIN_SPAWN_DIST,\n            0,\n            Math.sin(angle) * MIN_SPAWN_DIST\n        );\n    } else {\n        newZombieMesh.position.set(x, 0, z);\n    }\n    newZombieMesh.scale.set(0.5, 0.5, 0.5);\n    newZombieMesh.rotation.y = Math.random() * Math.PI * 2; // Random initial rotation\n    scene.add(newZombieMesh);\n    // Create a physics collider for the zombie\n    const collider = new Capsule(new THREE.Vector3(0, 0.4, 0), new THREE.Vector3(0, 0.5, 0.1), 0.5);\n    collider.translate(newZombieMesh.position);\n    const zombieData = {\n        mesh: newZombieMesh,\n        collider: collider,\n        velocity: new THREE.Vector3(),\n        onFloor: true,\n        helper: createCapsuleHelper(collider),\n        health: 100, // Give zombies health\n        healthBar: createHealthBar(),\n    };\n    \n    activeZombies.push(zombieData);\n    scene.add(zombieData.helper);\n}\nfunction createHealthBar() {\n    const container = document.createElement('div');\n    Object.assign(container.style, {\n        position: 'absolute',\n        width: '50px',\n        height: '5px',\n        backgroundColor: 'rgba(0,0,0,0.5)',\n        border: '1px solid black',\n        borderRadius: '2px',\n        display: 'none', // Initially hidden\n        zIndex: '10',\n    });\n    const bar = document.createElement('div');\n    Object.assign(bar.style, {\n        width: '100%',\n        height: '100%',\n        backgroundColor: '#dc3545', // Red\n        borderRadius: '1px',\n        transition: 'width 0.1s linear',\n    });\n    container.appendChild(bar);\n    document.body.appendChild(container);\n    return { container, bar };\n}\nexport function updateZombies(dt) {\n    if (!zombieModel) return;\n    spawnTimer -= dt;\n    if (spawnTimer \u003c= 0) {\n        spawnZombie();\n        const scoreBonus = state.score * 0.025; // How much faster spawns get per point\n        spawnTimer = Math.max(0.25, SPAWN_INTERVAL - scoreBonus); // Increase rate as score goes up, with a cap\n    }\n    const playerPosition = state.physics.playerCollider.end;\n    const zombieMoveSpeed = 2;\n    for (const zombie of activeZombies) {\n        // --- Health Bar Update ---\n        const screenPosition = new THREE.Vector3();\n        const healthBarHeightOffset = 1.5; // Position the bar above the zombie's head\n        screenPosition.copy(zombie.mesh.position).y += healthBarHeightOffset;\n        screenPosition.project(camera); // Project 3D position to 2D screen space\n        // Only show if the zombie is in front of the camera\n        if (screenPosition.z \u003c 1) {\n            const x = (screenPosition.x * 0.5 + 0.5) * window.innerWidth;\n            const y = (screenPosition.y * -0.5 + 0.5) * window.innerHeight;\n            zombie.healthBar.container.style.display = 'block';\n            zombie.healthBar.container.style.left = `${x - 25}px`; // Center the bar\n            zombie.healthBar.container.style.top = `${y}px`;\n            const healthPercentage = Math.max(0, (zombie.health / 100) * 100);\n            zombie.healthBar.bar.style.width = `${healthPercentage}%`;\n        } else {\n            zombie.healthBar.container.style.display = 'none';\n        }\n        const direction = playerPosition.clone().sub(zombie.mesh.position).normalize();\n        zombie.velocity.x = direction.x * zombieMoveSpeed;\n        zombie.velocity.z = direction.z * zombieMoveSpeed;\n        zombie.mesh.lookAt(playerPosition.x, zombie.mesh.position.y, playerPosition.z);\n        let damping = Math.exp(-4 * dt) - 1;\n        if (!zombie.onFloor) {\n            zombie.velocity.y -= state.physics.GRAVITY * dt;\n            damping *= 0.1;\n        }\n        zombie.velocity.addScaledVector(zombie.velocity, damping);\n        const deltaPos = zombie.velocity.clone().multiplyScalar(dt);\n        zombie.collider.translate(deltaPos);\n        const res = state.physics.worldOctree.capsuleIntersect(zombie.collider);\n        zombie.onFloor = false;\n        if (res) {\n            zombie.onFloor = res.normal.y \u003e 0;\n            if (!zombie.onFloor) {\n                zombie.velocity.addScaledVector(res.normal, -res.normal.dot(zombie.velocity));\n            }\n            if (res.depth \u003e= 1e-10) {\n                zombie.collider.translate(res.normal.multiplyScalar(res.depth));\n            }\n        }\n        \n        zombie.mesh.position.copy(zombie.collider.start).add(new THREE.Vector3(0, 0, 0));\n        \n        const capsuleHeight = zombie.collider.end.y - zombie.collider.start.y;\n        zombie.helper.position.copy(zombie.collider.start);\n        zombie.helper.position.y += capsuleHeight / 2;\n        const playerCollider = state.physics.playerCollider;\n        const collisionDist = zombie.collider.radius + playerCollider.radius;\n        const actualDist = zombie.collider.end.distanceTo(playerCollider.end);\n        if (actualDist \u003c collisionDist) {\n            const now = performance.now() / 1000;\n            // Check if cooldown has passed\n            if (now - state.lastDamageTime \u003e state.damageCooldown) {\n                state.playerHealth -= 15; // Player takes 15 damage\n                state.lastDamageTime = now; // Reset cooldown timer\n                state.damageFlash = 0.5; // Trigger the flash effect\n                playPlayerDamageSound(); // Play damage sound\n                \n                // Clamp health to 0\n                if (state.playerHealth \u003c 0) {\n                    state.playerHealth = 0;\n                }\n                \n                // Check for game over\n                if (state.playerHealth \u003c= 0) {\n                    state.isGameOver = true;\n                }\n            }\n        }\n    }\n}\nfunction createCapsuleHelper(capsule) {\n    const helper = new THREE.Group();\n    const material = new THREE.MeshBasicMaterial({ color: 0x00ff00, wireframe: true });\n    const radius = capsule.radius;\n    const cylinderHeight = capsule.end.y - capsule.start.y;\n    // Cylinder\n    const cylinder = new THREE.Mesh(\n        new THREE.CylinderGeometry(radius, radius, cylinderHeight, 8),\n        material\n    );\n    cylinder.position.y = cylinderHeight / 2;\n    // Spheres\n    const sphere1 = new THREE.Mesh(new THREE.SphereGeometry(radius, 8, 8), material);\n    const sphere2 = new THREE.Mesh(new THREE.SphereGeometry(radius, 8, 8), material);\n    sphere1.position.y = cylinderHeight;\n    helper.add(cylinder, sphere1, sphere2);\n    helper.visible = false; // Make helper invisible by default\n    return helper;\n}"])</script><script>self.__next_f.push([1,"1b:T1e70,"])</script><script>self.__next_f.push([1,"import * as THREE from 'three';\nimport { state } from 'state';\nimport { SimplePhysics } from 'SimplePhysics';\nimport { camera, scene } from 'renderer'; // Import camera and scene\nimport { animateBlowback, gunModel } from 'gun'; // Import blowback animation function AND gunModel\nimport { swordModel, triggerSwordSwing } from 'sword'; // Import sword logic\nimport { activeZombies } from 'zombie'; // Import zombies to check for hits\nimport { createExplosion } from 'particles'; // Import the explosion function\nimport { playGunshotSound, playExplosionSound } from 'audio'; // Import sound functions\nimport { checkKillCountForUpgrade } from 'upgrades';\nconst NUM_SPHERES = 100, RADIUS = 0.05;\nlet physics; // Declare physics instance variable\nlet sphereIdx = 0;\nlet mouseDownTime = 0;\nconst originVector = new THREE.Vector3(); // Temporary vector for origin calculation\nconst directionVector = new THREE.Vector3(); // Temporary vector for direction calculation\nconst tempVector = new THREE.Vector3();\nexport function setupPhysicsSystem() {\n  physics = new SimplePhysics({ gravity: 30, stepsPerFrame: 5, camera }); // Initialize physics here\n  state.physics = physics; // Assign to global state\n  physics.initPlayer();\n  physics.setKeyMap(state.key);\n\n  // create laser projectiles\n  const laserLength = 1.5;\n  const geom = new THREE.CylinderGeometry(RADIUS, RADIUS, laserLength, 8);\n  geom.rotateX(Math.PI / 2); // Orient cylinder to point along Z-axis\n  const mat = new THREE.MeshLambertMaterial({\n      color: 0x00ffff, // Cyan color\n      emissive: 0x00ffff, // Make it glow\n      emissiveIntensity: 2,\n  });\n  for (let i = 0; i \u003c NUM_SPHERES; i++) {\n    const m = new THREE.Mesh(geom, mat);\n    m.castShadow = false; // Lasers don't need to cast shadows\n    m.receiveShadow = false;\n    scene.add(m);\n    // The physics collider is still a sphere for simplicity and efficiency\n    physics.addSphere(m, new THREE.Vector3(0, -100, 0), RADIUS);\n  }\n\n  // mouse throw listener\n  const canvas = document.getElementById('renderDiv'); // Use container div\n  canvas.addEventListener('mousedown', () =\u003e { mouseDownTime = performance.now(); });\n  document.addEventListener('mouseup', () =\u003e { // Listen on document for mouseup\n    if (document.pointerLockElement \u0026\u0026 physics \u0026\u0026 gunModel \u0026\u0026 state.activeWeapon === 'gun') {\n      if (state.ammo \u003c= 0 \u0026\u0026 !state.infiniteAmmoActive) {\n        // Maybe play an \"empty clip\" sound here in the future\n        return;\n      }\n      if (!state.infiniteAmmoActive) {\n          state.ammo--; // Decrement ammo\n      }\n      // 1. ACCURATE AIM: Get the direction the camera is facing.\n      camera.getWorldDirection(directionVector);\n      // 2. PHYSICS: The \"real\" projectile starts from the camera's center for perfect accuracy.\n      originVector.copy(camera.position);\n      // The collider starts at the camera's position for accurate hit detection.\n      const s = physics.spheres[sphereIdx];\n      s.collider.center.copy(originVector);\n      \n      physics.throwBall(sphereIdx, performance.now() - mouseDownTime, originVector, directionVector);\n      \n      // 3. VISUALS: The visible tracer mesh *appears* to start at the gun's muzzle.\n      // We calculate the muzzle's world position and place the mesh there.\n      const muzzleOffset = new THREE.Vector3(0, 0.05, -0.4); // Use same offset as muzzle flash\n      gunModel.localToWorld(muzzleOffset);\n      s.mesh.position.copy(muzzleOffset); // The mesh starts at the muzzle.\n      \n      physics.spheres[sphereIdx].mesh.scale.setScalar(state.bulletSize); // Apply bullet size upgrade\n      animateBlowback(); // Trigger the blowback animation\n      playGunshotSound(); // Play the gunshot sound\n      sphereIdx = (sphereIdx + 1) % NUM_SPHERES;\n    } else if (document.pointerLockElement \u0026\u0026 swordModel \u0026\u0026 state.activeWeapon === 'sword') {\n        if (triggerSwordSwing()) {\n            // Check for zombie hits after a short delay to match the animation\n            setTimeout(checkSwordZombieCollisions, 100);\n        }\n    }\n  });\n\n  return physics; // Return the instance if needed elsewhere\n}\n\nexport function updatePhysicsSystem(dt) {\n  if (physics) { // Check if physics is initialized before updating\n    physics.updateAccum(dt, checkSphereZombieCollisions); // Pass collision check as callback\n  }\n}\nfunction checkSphereZombieCollisions() {\n    if (!physics) return;\n    for (const sphere of physics.spheres) {\n        if (sphere.collider.center.y \u003c -90) continue; // Skip inactive spheres\n        for (let i = activeZombies.length - 1; i \u003e= 0; i--) {\n            const zombie = activeZombies[i];\n            const dist = sphere.collider.center.distanceTo(zombie.collider.end);\n            const sphereRadius = sphere.collider.radius * sphere.mesh.scale.x; // Use scaled radius for hit check\n            if (dist \u003c zombie.collider.radius + sphereRadius) {\n                // HIT!\n                zombie.health -= state.gunDamage;\n                createExplosion(sphere.collider.center, sphere.velocity); // Pass bullet velocity to particles\n                playExplosionSound(); // Play explosion sound\n                if (zombie.health \u003c= 0) {\n                    document.body.removeChild(zombie.healthBar.container);\n                    scene.remove(zombie.mesh);\n                    scene.remove(zombie.helper);\n                    activeZombies.splice(i, 1);\n                    state.score++;\n                    checkKillCountForUpgrade(); // Check if we should trigger an upgrade\n                    const scoreElement = document.getElementById('score-display');\n                    if (scoreElement) {\n                        scoreElement.textContent = `Score: ${state.score}`;\n                    }\n                }\n                \n                // Deactivate sphere so it doesn't hit other things\n                sphere.collider.center.set(0, -100, 0);\n                sphere.velocity.set(0, 0, 0);\n                break; // Exit inner loop once a hit is registered for this sphere\n            }\n        }\n    }\n}\nfunction checkSwordZombieCollisions() {\n    if (!physics) return;\n    const MELEE_RANGE = 2.5;\n    const MELEE_ARC_DEGREES = 90;\n    const MELEE_DAMAGE = 50;\n    const playerPosition = physics.playerCollider.end;\n    camera.getWorldDirection(directionVector); // Player's forward direction\n    for (let i = activeZombies.length - 1; i \u003e= 0; i--) {\n        const zombie = activeZombies[i];\n        \n        // 1. Check distance\n        const dist = playerPosition.distanceTo(zombie.collider.end);\n        if (dist \u003e MELEE_RANGE) continue;\n        // 2. Check angle\n        const zombieDirection = tempVector.subVectors(zombie.collider.end, playerPosition).normalize();\n        const angle = directionVector.angleTo(zombieDirection) * (180 / Math.PI);\n        if (angle \u003e MELEE_ARC_DEGREES / 2) continue;\n        \n        // HIT!\n        zombie.health -= MELEE_DAMAGE; // Assuming zombies have health now\n        \n        // Create a directional blood splatter for sword hits\n        const splatterDirection = tempVector.subVectors(zombie.collider.end, playerPosition).normalize();\n        createExplosion(zombie.collider.end, splatterDirection.multiplyScalar(5));\n        playExplosionSound(); // Maybe a different \"slice\" sound later\n        if (zombie.health \u003c= 0) {\n            document.body.removeChild(zombie.healthBar.container);\n            scene.remove(zombie.mesh);\n            scene.remove(zombie.helper);\n            activeZombies.splice(i, 1);\n            state.score++;\n            checkKillCountForUpgrade(); // Check if we should trigger an upgrade\n            const scoreElement = document.getElementById('score-display');\n            if (scoreElement) {\n                scoreElement.textContent = `Score: ${state.score}`;\n            }\n        }\n    }\n}"])</script><script>self.__next_f.push([1,"1c:T5257,"])</script><script>self.__next_f.push([1,"import * as THREE from 'three'; // Keep THREE import if needed directly in main\nimport { setupRenderer, renderFrame, camera } from 'renderer'; // Import camera\nimport { setupInput } from 'input';\nimport { state } from 'state';\nimport { setupPhysicsSystem, updatePhysicsSystem } from 'simplePhysicsSystem'; // Import setup function\nimport { loadCollisionWorld } from 'collisionWorld';\nimport { loadGun, updateGunAnimation, gunModel } from 'gun'; // Import gun loader AND update function\nimport { loadSword, updateSwordAnimation, swordModel } from 'sword';\nimport { setupZombies, updateZombies } from 'zombie';\nimport { setupParticles, updateParticles } from 'particles';\nimport { setupMusic, updateMusic, MuteManager } from 'musicManager';\nimport { setupPlayerMusic } from 'playerMusic';\nimport { setupAmmo, updateAmmo } from 'ammo';\nimport Stats from 'three/addons/libs/stats.module.js'; // Keep Stats import\nimport { applyUpgrade } from 'upgrades';\nimport { setMasterVolume } from 'audio';\n// Initial Setup\nsetupInput(camera); // Pass camera to input setup\nconst { renderer } = setupRenderer(); // Destructure renderer\nsetupPhysicsSystem(); // Setup physics system\nloadCollisionWorld('https://threejs.org/examples/models/gltf/collision-world.glb');\nloadGun(); // Load the gun model\nloadSword(); // Load the sword model\nsetupZombies();\nsetupParticles();\nsetupMusic();\nsetupPlayerMusic();\nsetupAmmo();\n// Stats Panel\nconst stats = new Stats();\nstats.domElement.style.position = 'absolute';\nstats.domElement.style.top = '0px';\nstats.domElement.style.left = '0px'; // Position top-left\ndocument.getElementById('renderDiv').appendChild(stats.domElement);\n// --- Add Score Display ---\nconst scoreElement = document.createElement('div');\nscoreElement.id = 'score-display';\nscoreElement.style.position = 'absolute';\nscoreElement.style.top = '10px';\nscoreElement.style.left = '100px';\nscoreElement.style.color = 'white';\nscoreElement.style.fontFamily = `'RetroByte', sans-serif`;\nscoreElement.style.fontSize = '24px';\nscoreElement.style.fontWeight = '700';\nscoreElement.style.textShadow = '2px 2px 4px rgba(0,0,0,0.8)';\nscoreElement.textContent = 'Score: 0';\ndocument.body.appendChild(scoreElement);\n// --- Add Ammo Display ---\nconst ammoElement = document.createElement('div');\nammoElement.id = 'ammo-display';\nObject.assign(ammoElement.style, {\n    position: 'absolute',\n    bottom: '20px',\n    right: '20px',\n    color: 'white',\n    fontFamily: `'RetroByte', sans-serif`,\n    fontSize: '24px',\n    fontWeight: '700',\n    textShadow: '2px 2px 4px rgba(0,0,0,0.8)',\n    zIndex: '100', // Ensure it's above other elements if needed\n});\ndocument.body.appendChild(ammoElement);\n// --- End Ammo Display ---\n// --- Add Health Bar ---\nconst healthBarContainer = document.createElement('div');\nObject.assign(healthBarContainer.style, {\n    position: 'absolute',\n    bottom: '60px', // Position above ammo display\n    right: '20px',\n    width: '200px',\n    height: '20px',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    border: '2px solid white',\n    borderRadius: '5px',\n    zIndex: '100',\n});\nconst healthBar = document.createElement('div');\nhealthBar.id = 'health-bar';\nObject.assign(healthBar.style, {\n    width: '100%',\n    height: '100%',\n    backgroundColor: '#dc3545', // Red color for health\n    borderRadius: '3px',\n    transition: 'width 0.2s ease-in-out', // Smooth transition on damage\n});\nhealthBarContainer.appendChild(healthBar);\ndocument.body.appendChild(healthBarContainer);\n// --- End Health Bar ---\n// --- Add Jetpack Fuel Bar ---\nconst jetpackFuelBarContainer = document.createElement('div');\njetpackFuelBarContainer.id = 'jetpack-fuel-container';\nObject.assign(jetpackFuelBarContainer.style, {\n    position: 'absolute',\n    bottom: '90px', // Position above health bar\n    right: '20px',\n    width: '200px',\n    height: '15px',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    border: '2px solid white',\n    borderRadius: '5px',\n    zIndex: '100',\n    display: 'none', // Hidden until jetpack is unlocked\n});\nconst jetpackFuelBar = document.createElement('div');\njetpackFuelBar.id = 'jetpack-fuel-bar';\nObject.assign(jetpackFuelBar.style, {\n    width: '100%',\n    height: '100%',\n    backgroundColor: '#00ffff', // Cyan/aqua color for fuel\n    borderRadius: '3px',\n    transition: 'width 0.1s linear',\n});\njetpackFuelBarContainer.appendChild(jetpackFuelBar);\ndocument.body.appendChild(jetpackFuelBarContainer);\n// --- End Jetpack Fuel Bar ---\n// --- Add Crosshair ---\nconst crosshairSize = '20px';\nconst crosshairColor = 'rgba(255, 255, 255, 0.8)';\nconst crosshairThickness = '2px';\nconst style = document.createElement('style');\nstyle.textContent = `\n  @font-face {\n    font-family: 'RetroByte';\n    src: url('https://play.rosebud.ai/assets/RetroByte.ttf?2x8E') format('truetype');\n  }\n  .crosshair {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: ${crosshairSize};\n    height: ${crosshairSize};\n    pointer-events: none; /* Allow clicks to pass through */\n    z-index: 10; /* Ensure it's above the canvas */\n  }\n  .crosshair::before,\n  .crosshair::after {\n    content: '';\n    position: absolute;\n    background-color: ${crosshairColor};\n    box-shadow: 0 0 5px rgba(0,0,0,0.5); /* Optional shadow for visibility */\n  }\n  .crosshair::before { /* Vertical line */\n    left: 50%;\n    top: 0;\n    width: ${crosshairThickness};\n    height: 100%;\n    transform: translateX(-50%);\n  }\n  .crosshair::after { /* Horizontal line */\n    top: 50%;\n    left: 0;\n    width: 100%;\n    height: ${crosshairThickness};\n    transform: translateY(-50%);\n  }\n`;\ndocument.head.appendChild(style);\nconst crosshairElement = document.createElement('div');\ncrosshairElement.className = 'crosshair';\ndocument.body.appendChild(crosshairElement);\n// --- End Crosshair ---\n// --- Add Damage Flash ---\nconst damageFlashElement = document.createElement('div');\ndamageFlashElement.id = 'damage-flash';\nObject.assign(damageFlashElement.style, {\n    position: 'fixed',\n    top: '0',\n    left: '0',\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(255, 0, 0, 0)',\n    pointerEvents: 'none', // Make sure it doesn't intercept clicks\n    zIndex: '15', // Should be above game, below UI like game over screen\n    transition: 'background-color 0.1s ease-out', // Smooth fade-out\n});\ndocument.body.appendChild(damageFlashElement);\n// --- End Damage Flash ---\n// --- Add Game Over Screen ---\nconst gameOverElement = document.createElement('div');\ngameOverElement.id = 'game-over-screen';\nObject.assign(gameOverElement.style, {\n    position: 'fixed',\n    top: '0',\n    left: '0',\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(0, 0, 0, 0.75)',\n    color: 'white',\n    display: 'none',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontFamily: `'RetroByte', sans-serif`,\n    textAlign: 'center',\n    zIndex: '20',\n});\ngameOverElement.innerHTML = `\n    \u003ch1 style=\"font-size: 4rem; margin-bottom: 20px; text-shadow: 3px 3px 8px rgba(255,0,0,0.7);\"\u003eGame Over\u003c/h1\u003e\n    \u003cp id=\"final-score\" style=\"font-size: 2rem; margin-bottom: 40px;\"\u003e\u003c/p\u003e\n    \u003cdiv style=\"display: flex; gap: 20px;\"\u003e\n        \u003cbutton id=\"restart-button\" style=\"padding: 15px 30px; font-size: 1.5rem; color: white; background-color: #dc3545; border: none; border-radius: 5px; cursor: pointer;\"\u003eRestart\u003c/button\u003e\n        \u003cbutton id=\"game-over-settings-button\" style=\"padding: 15px 30px; font-size: 1.5rem; color: white; background-color: #333; border: 1px solid white; border-radius: 5px; cursor: pointer;\"\u003eSettings\u003c/button\u003e\n    \u003c/div\u003e\n`;\ndocument.body.appendChild(gameOverElement);\ndocument.getElementById('restart-button').addEventListener('click', () =\u003e {\n    window.location.reload();\n});\ndocument.getElementById('game-over-settings-button').addEventListener('click', () =\u003e {\n    state.isSettingsVisible = true;\n    gameOverElement.style.display = 'none'; // Hide game over screen\n});\nfunction showGameOverScreen() {\n    document.getElementById('final-score').textContent = `Your Score: ${state.score}`;\n    gameOverElement.style.display = 'flex';\n    document.exitPointerLock();\n}\n// --- End Game Over Screen ---\n// --- Add Pause Menu ---\nconst pauseMenuElement = document.createElement('div');\npauseMenuElement.id = 'pause-menu';\nObject.assign(pauseMenuElement.style, {\n    position: 'fixed', top: '0', left: '0', width: '100%', height: '100%',\n    backgroundColor: 'rgba(0, 0, 0, 0.75)', color: 'white',\n    display: 'none', flexDirection: 'column', justifyContent: 'center', alignItems: 'center',\n    fontFamily: `'RetroByte', sans-serif`, zIndex: '30',\n});\npauseMenuElement.innerHTML = `\n    \u003ch1 style=\"font-size: 4rem; text-shadow: 3px 3px 8px rgba(0,255,255,0.7);\"\u003ePAUSED\u003c/h1\u003e\n    \u003cdiv style=\"display: flex; flex-direction: column; gap: 20px; margin-top: 2rem;\"\u003e\n        \u003cbutton id=\"resume-button\" style=\"padding: 15px 30px; font-size: 1.5rem; color: black; background-color: #00ffff; border: none; border-radius: 5px; cursor: pointer;\"\u003eResume\u003c/button\u003e\n        \u003cbutton id=\"pause-settings-button\" style=\"padding: 15px 30px; font-size: 1.5rem; color: white; background-color: #333; border: 1px solid white; border-radius: 5px; cursor: pointer;\"\u003eSettings\u003c/button\u003e\n        \u003cbutton id=\"pause-main-menu-button\" style=\"padding: 15px 30px; font-size: 1.5rem; color: white; background-color: #dc3545; border: none; border-radius: 5px; cursor: pointer;\"\u003eMain Menu\u003c/button\u003e\n    \u003c/div\u003e\n`;\ndocument.body.appendChild(pauseMenuElement);\ndocument.getElementById('resume-button').addEventListener('click', () =\u003e {\n    state.isGamePaused = false;\n    state.isPauseMenuVisible = false;\n    document.body.requestPointerLock();\n});\ndocument.getElementById('pause-main-menu-button').addEventListener('click', () =\u003e {\n    window.location.reload();\n});\ndocument.getElementById('pause-settings-button').addEventListener('click', () =\u003e {\n    state.isPauseMenuVisible = false;\n    state.isSettingsVisible = true;\n});\n// --- Add Upgrade Screen ---\nconst upgradeScreenElement = document.createElement('div');\nupgradeScreenElement.id = 'upgrade-screen';\nObject.assign(upgradeScreenElement.style, {\n    position: 'fixed',\n    top: '0',\n    left: '0',\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(0, 0, 0, 0.85)',\n    color: 'white',\n    display: 'none',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontFamily: `'RetroByte', sans-serif`,\n    textAlign: 'center',\n    zIndex: '25',\n});\nupgradeScreenElement.innerHTML = `\n    \u003ch1 style=\"font-size: 3rem; margin-bottom: 40px; text-shadow: 3px 3px 8px rgba(0,255,255,0.7);\"\u003eCHOOSE YOUR UPGRADE\u003c/h1\u003e\n    \u003cdiv id=\"upgrade-options\" style=\"display: flex; gap: 30px;\"\u003e\u003c/div\u003e\n`;\ndocument.body.appendChild(upgradeScreenElement);\nfunction showUpgradeScreen() {\n    const optionsContainer = document.getElementById('upgrade-options');\n    optionsContainer.innerHTML = ''; // Clear previous options\n    state.upgradesToShow.forEach(upgrade =\u003e {\n        const button = document.createElement('button');\n        button.className = 'upgrade-button';\n        button.style.cssText = `\n            padding: 20px 30px;\n            font-size: 1.2rem;\n            color: white;\n            background-color: #1a1a1a;\n            border: 2px solid #00ffff;\n            border-radius: 10px;\n            cursor: pointer;\n            width: 250px;\n            text-align: left;\n            transition: all 0.2s ease;\n        `;\n        button.innerHTML = `\n            \u003ch3 style=\"margin: 0 0 10px 0; color: #00ffff;\"\u003e${upgrade.name}\u003c/h3\u003e\n            \u003cp style=\"margin: 0; font-size: 1rem; color: #cccccc;\"\u003e${upgrade.description}\u003c/p\u003e\n        `;\n        // Add hover effect via JS\n        button.onmouseenter = () =\u003e {\n            button.style.backgroundColor = '#00ffff';\n            button.style.color = 'black';\n            button.querySelector('h3').style.color = 'black';\n            button.querySelector('p').style.color = '#333333';\n        };\n        button.onmouseleave = () =\u003e {\n            button.style.backgroundColor = '#1a1a1a';\n            button.style.color = 'white';\n            button.querySelector('h3').style.color = '#00ffff';\n            button.querySelector('p').style.color = '#cccccc';\n        };\n        button.onclick = () =\u003e {\n            applyUpgrade(upgrade.id);\n            hideUpgradeScreen();\n        };\n        optionsContainer.appendChild(button);\n    });\n    upgradeScreenElement.style.display = 'flex';\n}\nfunction hideUpgradeScreen() {\n    upgradeScreenElement.style.display = 'none';\n    // Re-lock the pointer after selection to continue playing\n    document.body.requestPointerLock();\n}\n// --- End Upgrade Screen ---\n// --- Add Main Menu ---\nconst mainMenuElement = document.createElement('div');\nmainMenuElement.id = 'main-menu';\nObject.assign(mainMenuElement.style, {\n    position: 'fixed',\n    top: '0',\n    left: '0',\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\n    color: 'white',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontFamily: `'RetroByte', sans-serif`,\n    zIndex: '50',\n});\nmainMenuElement.innerHTML = `\n    \u003ch1 style=\"font-size: 5rem; text-shadow: 4px 4px 12px rgba(0,255,255,0.7); margin-bottom: 1.5rem;\"\u003eZOMBIE WAVE\u003c/h1\u003e\n    \u003cbutton id=\"start-game-button\" style=\"padding: 20px 40px; font-size: 2rem; color: black; background-color: #00ffff; border: none; border-radius: 10px; cursor: pointer; text-transform: uppercase; margin-bottom: 2.5rem;\"\u003eStart Game\u003c/button\u003e\n    \u003cbutton id=\"main-menu-settings-button\" style=\"padding: 15px 30px; font-size: 1.5rem; color: white; background-color: #333; border: 1px solid white; border-radius: 5px; cursor: pointer;\"\u003eSettings\u003c/button\u003e\n`;\ndocument.body.appendChild(mainMenuElement);\n// --- Add Reusable Settings Panel ---\nconst settingsPanelElement = document.createElement('div');\nsettingsPanelElement.id = 'settings-panel';\nObject.assign(settingsPanelElement.style, {\n    position: 'fixed', top: '0', left: '0', width: '100%', height: '100%',\n    backgroundColor: 'rgba(0, 0, 0, 0.85)', color: 'white',\n    display: 'none', flexDirection: 'column', justifyContent: 'center', alignItems: 'center',\n    fontFamily: `'RetroByte', sans-serif`, zIndex: '40',\n});\nsettingsPanelElement.innerHTML = `\n    \u003cdiv style=\"background-color: rgba(255,255,255,0.05); padding: 35px; border-radius: 10px; width: 450px; display: flex; flex-direction: column; gap: 20px;\"\u003e\n        \u003ch2 style=\"text-align: center; margin-top: 0; margin-bottom: 25px; font-size: 2rem; text-shadow: 2px 2px 6px rgba(0,255,255,0.7);\"\u003eSETTINGS\u003c/h2\u003e\n        \u003cdiv class=\"setting-row\" style=\"display: flex; justify-content: space-between; align-items: center; font-size: 1.1rem;\"\u003e\n            \u003clabel for=\"settings-master-volume\"\u003eMaster Volume\u003c/label\u003e\n            \u003cinput type=\"range\" id=\"settings-master-volume\" min=\"0\" max=\"1\" step=\"0.01\" value=\"${state.masterVolume}\" style=\"width: 220px;\"\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"setting-row\" style=\"display: flex; justify-content: space-between; align-items: center; font-size: 1.1rem;\"\u003e\n            \u003clabel for=\"settings-sensitivity\"\u003eMouse Sensitivity\u003c/label\u003e\n            \u003cinput type=\"range\" id=\"settings-sensitivity\" min=\"0.1\" max=\"3\" step=\"0.1\" value=\"${state.mouseSensitivity}\" style=\"width: 220px;\"\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"setting-row\" style=\"border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px; margin-top: 10px;\"\u003e\n            \u003ch4 style=\"margin: 0 0 10px 0; text-align: center;\"\u003eCustom Music\u003c/h4\u003e\n            \u003cinput type=\"file\" id=\"mp3-upload\" accept=\".mp3\" style=\"margin-bottom: 10px; width: 100%;\"\u003e\n            \u003cdiv id=\"track-name\" style=\"height: 20px; font-style: italic; text-align: center; margin-bottom: 10px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;\"\u003eNo track selected\u003c/div\u003e\n        \u003c/div\u003e\n        \u003cbutton id=\"settings-back-button\" style=\"padding: 15px 30px; font-size: 1.2rem; color: black; background-color: #00ffff; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;\"\u003eBack\u003c/button\u003e\n    \u003c/div\u003e\n`;\ndocument.body.appendChild(settingsPanelElement);\ndocument.getElementById('start-game-button').addEventListener('click', () =\u003e {\n    mainMenuElement.style.display = 'none';\n    state.isGameStarted = true;\n    document.body.requestPointerLock();\n});\ndocument.getElementById('main-menu-settings-button').addEventListener('click', () =\u003e {\n    state.isSettingsVisible = true;\n});\ndocument.getElementById('settings-master-volume').addEventListener('input', (e) =\u003e {\n    const volume = parseFloat(e.target.value);\n    state.masterVolume = volume;\n    setMasterVolume(volume);\n    MuteManager.setMuted(false);\n});\ndocument.getElementById('settings-sensitivity').addEventListener('input', (e) =\u003e {\n    state.mouseSensitivity = parseFloat(e.target.value);\n});\ndocument.getElementById('settings-back-button').addEventListener('click', () =\u003e {\n    state.isSettingsVisible = false;\n    // When coming from the main menu, the game hasn't started, so we don't need special logic\n    // When coming from the pause menu, the loop will handle showing it again.\n    if (state.isGamePaused) {\n        state.isPauseMenuVisible = true;\n    } else if (state.isGameOver) {\n        // If the game is over, show the game over screen again\n        gameOverElement.style.display = 'flex';\n    }\n});\n// --- End Main Menu ---\n// Main Loop\nfunction loop() {\n    if (!state.isGameStarted) {\n        // Only render and update stats before game starts\n        renderFrame(renderer);\n        stats.update();\n        requestAnimationFrame(loop);\n        return;\n    }\n    if (state.isGameOver) {\n        if (gameOverElement.style.display === 'none') {\n            showGameOverScreen();\n        }\n        renderFrame(renderer);\n        stats.update();\n        requestAnimationFrame(loop);\n        return;\n    }\n    \n    if (state.isUpgradeScreenVisible \u0026\u0026 upgradeScreenElement.style.display === 'none') {\n        showUpgradeScreen();\n    }\n    // Handle Pause Menu visibility\n    pauseMenuElement.style.display = state.isPauseMenuVisible ? 'flex' : 'none';\n    // Handle Settings Panel visibility\n    settingsPanelElement.style.display = state.isSettingsVisible ? 'flex' : 'none';\n    // Hide main menu if settings are open from it\n    mainMenuElement.style.display = (!state.isGameStarted \u0026\u0026 !state.isSettingsVisible) ? 'flex' : 'none';\n    if (state.isGamePaused || state.isSettingsVisible) { // Pause if settings are open too\n        // Only update things that should run while paused\n        stats.update();\n        requestAnimationFrame(loop);\n        return;\n    }\n    const dt = Math.min(0.05, state.clock.getDelta()); // Use state's clock\n    updatePhysicsSystem(dt);\n    updateGunAnimation(dt); // Update gun animation each frame\n    updateSwordAnimation(dt); // Update sword animation each frame\n    // Handle weapon visibility\n    if (gunModel \u0026\u0026 swordModel) {\n        const isGunActive = state.activeWeapon === 'gun';\n        gunModel.visible = isGunActive;\n        swordModel.visible = !isGunActive;\n        // Show/hide UI elements based on active weapon\n        crosshairElement.style.display = isGunActive ? 'block' : 'none';\n        ammoElement.style.display = isGunActive ? 'block' : 'none';\n    }\n    updateZombies(dt);\n    updateParticles(dt);\n    updateMusic(dt); // Update music based on game state\n    updateAmmo(dt);\n    // Update Ammo UI\n    if (state.infiniteAmmoActive) {\n        ammoElement.textContent = `Ammo: ‚àû (${Math.ceil(state.infiniteAmmoTimer)}s)`;\n    } else {\n        ammoElement.textContent = `Ammo: ${state.ammo}`;\n    }\n    // Update Health Bar UI\n    const healthPercentage = (state.playerHealth / state.maxPlayerHealth) * 100;\n    healthBar.style.width = `${healthPercentage}%`;\n    // Update Jetpack Fuel Bar UI\n    if (state.jetpackUnlocked) {\n        jetpackFuelBarContainer.style.display = 'block';\n        const fuelPercentage = (state.jetpackFuel / state.maxJetpackFuel) * 100;\n        jetpackFuelBar.style.width = `${fuelPercentage}%`;\n    }\n    // Update Damage Flash\n    if (state.damageFlash \u003e 0) {\n        state.damageFlash -= dt * 2; // Fade out speed\n        damageFlashElement.style.backgroundColor = `rgba(255, 0, 0, ${state.damageFlash})`;\n    } else {\n        damageFlashElement.style.backgroundColor = 'rgba(255, 0, 0, 0)';\n    }\n    // Update Timers\n    if (state.infiniteAmmoActive) {\n        state.infiniteAmmoTimer -= dt;\n        if (state.infiniteAmmoTimer \u003c= 0) {\n            state.infiniteAmmoActive = false;\n        }\n    }\n    // Regenerate Jetpack Fuel\n    if (state.jetpackUnlocked \u0026\u0026 state.physics.playerOnFloor \u0026\u0026 state.jetpackFuel \u003c state.maxJetpackFuel) {\n        state.jetpackFuel += 20 * dt; // Regenerate fuel when on the ground\n        if (state.jetpackFuel \u003e state.maxJetpackFuel) state.jetpackFuel = state.maxJetpackFuel;\n    }\n    renderFrame(renderer); // Pass renderer\n    stats.update(); // Update stats\n    state.events.length = 0; // Clear one-frame events (if used later)\n    requestAnimationFrame(loop);\n}\n// Start the loop\nloop();"])</script><script>self.__next_f.push([1,"1d:T6fa,import { state } from 'state';\nimport { scene } from 'renderer'; // Import scene from renderer\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { OctreeHelper } from 'three/addons/helpers/OctreeHelper.js';\nimport { GUI } from 'three/addons/libs/lil-gui.module.min.js'; // Import GUI\n\nexport function loadCollisionWorld(url) {\n  new GLTFLoader().load(url, g =\u003e { // Changed gltf to g to avoid shadow variable name\n    g.scene.scale.set(2, 2, 2); // Scale up the world\n    scene.add(g.scene); // Use imported scene\n    // Ensure physics is initialized before using it\n    if (state.physics) {\n      state.physics.loadEnvironment(g.scene);\n\n      // Add Octree helper for debugging\n      const helper = new OctreeHelper( state.physics.worldOctree );\n      helper.visible = false;\n      scene.add( helper );\n\n      // Add GUI control for helper visibility\n      const gui = new GUI( { width: 200, container: document.getElementById('renderDiv') } ); // Specify container\n      gui.domElement.style.position = 'absolute'; // Position GUI\n      gui.domElement.style.top = '10px';\n      gui.domElement.style.right = '10px';\n      gui.add( { debug: false }, 'debug' )\n          .name( 'Octree Helper' ) // Give it a name\n          .onChange( function ( value ) {\n              helper.visible = value;\n          } );\n\n    } else {\n      console.error(\"Physics system not ready for collision world loading.\");\n    }\n\n    g.scene.traverse(c =\u003e {\n      if (c.isMesh) {\n        c.castShadow = c.receiveShadow = true;\n        if (c.material.map) c.material.map.anisotropy = 4; // Use anisotropy if map exists\n      }\n    });\n  },\n  undefined, // Progress callback (optional)\n  (error) =\u003e { // Error callback\n      console.error('Error loading collision world:', error);\n  });\n}1e:T9fe,"])</script><script>self.__next_f.push([1,"import { activeZombies } from 'zombie';\n\nconst TRACK1_URL = 'https://play.rosebud.ai/assets/track1.mp3?6Ivy'; // Calm track\nconst TRACK2_URL = 'https://play.rosebud.ai/assets/track2.mp3?O7cl'; // Intense track\n\nconst FADE_TIME = 1.5; // seconds to fade between tracks\nconst INTENSITY_THRESHOLD = 3; // Number of zombies to trigger intense music\n\nlet music1, music2;\nlet activeTrack = null;\nlet desiredTrack = null;\nlet musicInitialized = false;\nlet isGloballyMuted = false;\n\nfunction initializeMusic() {\n    if (musicInitialized) return;\n\n    music1 = new Audio(TRACK1_URL);\n    music1.loop = true;\n    music1.volume = 0;\n\n    music2 = new Audio(TRACK2_URL);\n    music2.loop = true;\n    music2.volume = 0;\n\n    // Start playing both tracks. They are silent until volume is increased.\n    music1.play().catch(e =\u003e console.log(\"User interaction needed to play audio.\"));\n    music2.play().catch(e =\u003e console.log(\"User interaction needed to play audio.\"));\n    \n    // Set the initial desired track\n    desiredTrack = music1;\n    activeTrack = music1;\n    \n    musicInitialized = true;\n    console.log(\"Music system initialized.\");\n}\n\n// This needs to be called after a user interaction, like a click\nexport function setupMusic() {\n    document.body.addEventListener('mousedown', initializeMusic, { once: true });\n}\n\n// Allows external modules to mute/unmute the built-in soundtrack\nexport const MuteManager = {\n    setMuted: (muted) =\u003e {\n        isGloballyMuted = muted;\n    }\n};\nexport function updateMusic(dt) {\n    if (!musicInitialized) return;\n    \n    // If globally muted, fade out all tracks and do nothing else\n    if (isGloballyMuted) {\n        if (music1.volume \u003e 0) music1.volume = Math.max(0, music1.volume - (1 / FADE_TIME) * dt);\n        if (music2.volume \u003e 0) music2.volume = Math.max(0, music2.volume - (1 / FADE_TIME) * dt);\n        return;\n    }\n    // Determine which track should be playing\n    desiredTrack = activeZombies.length \u003e= INTENSITY_THRESHOLD ? music2 : music1;\n    // Fade logic\n    if (activeTrack !== desiredTrack) {\n        // Fade out the active track\n        if (activeTrack.volume \u003e 0) {\n            activeTrack.volume = Math.max(0, activeTrack.volume - (1 / FADE_TIME) * dt);\n        }\n        // When faded out, switch active track\n        if (activeTrack.volume === 0) {\n            activeTrack = desiredTrack;\n        }\n    }\n    // Fade in the new active track\n    if (activeTrack.volume \u003c 0.5) { // Max volume set to 0.5\n        activeTrack.volume = Math.min(0.5, activeTrack.volume + (1 / FADE_TIME) * dt);\n    }\n}"])</script><script>self.__next_f.push([1,"1f:T44e,export const state = {\n  clock: null,          // Three.Clock set in renderer\n  key: {},              // key=\u003ebool live map\n  events: [],           // one‚Äëframe messages\n  physics: null,        // SimplePhysics instance\n  score: 0,\n  isGameStarted: false,\n  isGameOver: false,\n  isPauseMenuVisible: false,\n  isSettingsVisible: false,\n  mouseSensitivity: 1.0,\n  masterVolume: 0.2,\n  ammo: 30,\n  maxAmmo: 150,\n  playerHealth: 100,\n  maxPlayerHealth: 100,\n  lastDamageTime: 0,\n  damageCooldown: 1, // 1 second invulnerability after taking damage\n  damageFlash: 0, // Opacity for the damage indicator\n  activeWeapon: 'gun', // 'gun' or 'sword'\n  isSwordSwinging: false,\n  lastSwordSwingTime: 0,\n  swordSwingCooldown: 0.5, // 500ms cooldown\n  killsSinceLastUpgrade: 0,\n  isUpgradeScreenVisible: false,\n  upgradesToShow: [],\n  isGamePaused: false, // To pause zombie movement, etc.\n  gunDamage: 34, // Default gun damage (3 shots to kill)\n  bulletSize: 1.0, // Default bullet scale\n  infiniteAmmoActive: false,\n  infiniteAmmoTimer: 0,\n  jetpackUnlocked: false,\n  jetpackFuel: 100,\n  maxJetpackFuel: 100,\n};20:Tb05,"])</script><script>self.__next_f.push([1,"import * as THREE from 'three';\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { scene } from 'renderer';\nimport { state } from 'state';\n\nconst AMMO_BOX_URL = 'https://play.rosebud.ai/assets/Ammo box.glb?f3JK';\nlet ammoBoxModel = null;\nexport const activeAmmoBoxes = [];\nconst AMMO_PER_BOX = 15;\nconst SPAWN_RADIUS = 40; // Doubled for larger map\nconst RESPAWN_TIME = 10; // seconds\nlet respawnTimer = 0;\n\nexport function setupAmmo() {\n    const loader = new GLTFLoader();\n    loader.load(AMMO_BOX_URL, (gltf) =\u003e {\n        ammoBoxModel = gltf.scene;\n        ammoBoxModel.traverse(child =\u003e {\n            if (child.isMesh) {\n                child.castShadow = true;\n                child.receiveShadow = true;\n            }\n        });\n        console.log('Ammo box model loaded.');\n        // Spawn a few boxes to start\n        for (let i = 0; i \u003c 3; i++) {\n            spawnAmmoBox();\n        }\n    }, undefined, (error) =\u003e {\n        console.error('Error loading ammo box model:', error);\n    });\n}\n\nfunction spawnAmmoBox() {\n    if (!ammoBoxModel) return;\n    const newBoxMesh = ammoBoxModel.clone();\n    // Spawn at a random position within the spawn radius\n    // Spawn in a random square area instead of just on a circle's edge\n    const x = (Math.random() - 0.5) * SPAWN_RADIUS * 1.8;\n    const z = (Math.random() - 0.5) * SPAWN_RADIUS * 1.8;\n    newBoxMesh.position.set(x, 0.5, z);\n    newBoxMesh.scale.set(0.5, 0.5, 0.5);\n    scene.add(newBoxMesh);\n    const boxData = {\n        mesh: newBoxMesh,\n        collider: new THREE.Sphere(newBoxMesh.position, 1.5) // Collision radius\n    };\n    \n    activeAmmoBoxes.push(boxData);\n}\n// This function will be used later to manage ammo box interactions\nexport function updateAmmo(dt) {\n    const playerPosition = state.physics?.playerCollider?.end;\n    if (!playerPosition) return;\n    // Check for pickup collisions\n    for (let i = activeAmmoBoxes.length - 1; i \u003e= 0; i--) {\n        const box = activeAmmoBoxes[i];\n        box.mesh.rotation.y += dt * 0.5; // Keep the rotation effect\n        const distance = playerPosition.distanceTo(box.collider.center);\n        if (distance \u003c box.collider.radius) {\n            // Player picked up ammo\n            state.ammo = Math.min(state.maxAmmo, state.ammo + AMMO_PER_BOX);\n            \n            // Remove box from scene and active list\n            scene.remove(box.mesh);\n            activeAmmoBoxes.splice(i, 1);\n            \n            // Maybe play a pickup sound here later\n        }\n    }\n    \n    // Respawn logic\n    if (activeAmmoBoxes.length \u003c 3) { // Maintain at least 3 boxes\n        respawnTimer -= dt;\n        if (respawnTimer \u003c= 0) {\n            spawnAmmoBox();\n            respawnTimer = RESPAWN_TIME * (Math.random() * 0.5 + 0.75); // Reset with slight randomness\n        }\n    }\n}"])</script><script>self.__next_f.push([1,"21:T51d,import { MuteManager } from 'musicManager';\nlet playerAudio;\nexport function setupPlayerMusic() {\n    playerAudio = new Audio();\n    playerAudio.loop = true;\n    // The UI elements are now part of the main menu in main.js\n    // We just need to find them and attach listeners.\n    const fileInput = document.getElementById('mp3-upload');\n    const trackNameDisplay = document.getElementById('track-name');\n    \n    // Check if the elements exist before adding listeners\n    if (fileInput \u0026\u0026 trackNameDisplay) {\n        fileInput.addEventListener('change', (event) =\u003e {\n            const file = event.target.files[0];\n            if (file) {\n                const objectURL = URL.createObjectURL(file);\n                playerAudio.src = objectURL;\n                // Custom music volume is now controlled by the master volume in audio.js\n                // We just need to play it. The audio context will handle the gain.\n                playerAudio.play().then(() =\u003e {\n                    MuteManager.setMuted(true); // Mute built-in music\n                    trackNameDisplay.textContent = file.name;\n                }).catch(e =\u003e console.error(\"Error playing custom audio:\", e));\n            }\n        });\n    } else {\n        console.warn(\"Custom music player UI elements not found in main menu.\");\n    }\n}22:Ta63,"])</script><script>self.__next_f.push([1,"import { state } from 'state';\n\nconst UPGRADE_THRESHOLD = 10; // Kills needed to trigger upgrade screen\n\n// A master list of all possible upgrades. We'll add more later.\nconst allUpgrades = [\n    { id: 'health_boost', name: 'Health Boost', description: '+50 Max Health' },\n    { id: 'infinite_ammo', name: 'Infinite Ammo', description: 'Never run out of bullets for 30s' },\n    { id: 'jetpack', name: 'Jetpack', description: 'Hold Space to fly' },\n    { id: 'fast_swing', name: 'Swift Sword', description: 'Swing your sword 50% faster' },\n    { id: 'damage_up', name: 'Bigger Bullets', description: 'Your bullets deal more damage' },\n    { id: 'move_speed', name: 'Speed Cola', description: 'Move 25% faster' },\n];\n\n// This function will be called when the player reaches the kill threshold\nexport function triggerUpgradeSelection() {\n    state.killsSinceLastUpgrade = 0; // Reset counter\n    \n    // Pause the game\n    state.isGamePaused = true;\n    document.exitPointerLock();\n\n    // Randomly select 3 unique upgrades\n    const shuffled = [...allUpgrades].sort(() =\u003e 0.5 - Math.random());\n    state.upgradesToShow = shuffled.slice(0, 3);\n    \n    state.isUpgradeScreenVisible = true;\n}\n\n// This will be called when an upgrade is chosen from the UI\nexport function applyUpgrade(upgradeId) {\n    console.log(`Applying upgrade: ${upgradeId}`);\n    switch (upgradeId) {\n        case 'health_boost':\n            state.maxPlayerHealth += 50;\n            state.playerHealth += 50; // Heal the player by the same amount\n            break;\n        case 'move_speed':\n            if (state.physics) {\n                state.physics.playerSpeed += 5; // Increase the base speed\n            }\n            break;\n        case 'fast_swing':\n            state.swordSwingCooldown *= 0.5; // Reduce cooldown by 50%\n            break;\n        case 'damage_up':\n            state.gunDamage *= 1.5; // Increase damage by 50%\n            state.bulletSize *= 1.5; // Visually increase bullet size\n            break;\n        case 'infinite_ammo':\n            state.infiniteAmmoActive = true;\n            state.infiniteAmmoTimer = 30; // 30 seconds\n            break;\n        case 'jetpack':\n            state.jetpackUnlocked = true;\n            break;\n        // Other cases will go here later\n    }\n\n    // Unpause the game and hide the screen\n    state.isGamePaused = false;\n    state.isUpgradeScreenVisible = false;\n    // We'll need to re-request pointer lock, which we'll handle in main.js\n}\n\nexport function checkKillCountForUpgrade() {\n    state.killsSinceLastUpgrade++;\n    if (state.killsSinceLastUpgrade \u003e= UPGRADE_THRESHOLD) {\n        triggerUpgradeSelection();\n    }\n}"])</script><script>self.__next_f.push([1,"23:T85b,"])</script><script>self.__next_f.push([1,"import * as THREE from 'three';\nimport { state } from 'state';\n\nexport const scene = new THREE.Scene();\nexport const camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);\nlet renderer; // Keep renderer reference accessible\n\nexport function setupRenderer() {\n  const container = document.getElementById('renderDiv');\n  renderer = new THREE.WebGLRenderer({ antialias: true }); // Assign to the outer scope variable\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.shadowMap.enabled = true; // Enable shadows\n  renderer.shadowMap.type = THREE.VSMShadowMap; // Softer shadows\n  renderer.toneMapping = THREE.ACESFilmicToneMapping; // Better color\n\n  function resize() {\n    const { innerWidth: w, innerHeight: h } = window;\n    camera.aspect = w / h;\n    camera.updateProjectionMatrix();\n    renderer.setSize(w, h); // Removed false, let it update style\n  }\n  window.addEventListener('resize', resize);\n  resize(); // Initial size setup\n\n  container.appendChild(renderer.domElement);\n\n  camera.rotation.order = 'YXZ';\n  scene.background = new THREE.Color(0x88ccee);\n  scene.fog = new THREE.Fog(0x88ccee, 0, 50);\n\n  // Lighting\n  scene.add(new THREE.HemisphereLight(0x8dc1de, 0x00668d, 1.5));\n  const dir = new THREE.DirectionalLight(0xffffff, 2.5);\n  dir.position.set(-5, 25, -1);\n  dir.castShadow = true;\n  // Configure shadow camera for better quality/performance\n  dir.shadow.camera.near = 0.1;\n  dir.shadow.camera.far = 50;\n  dir.shadow.camera.right = 15;\n  dir.shadow.camera.left = -15;\n  dir.shadow.camera.top = 15;\n  dir.shadow.camera.bottom = -15;\n  dir.shadow.mapSize.width = 1024;\n  dir.shadow.mapSize.height = 1024;\n  dir.shadow.radius = 4; // Soften shadow edges\n  dir.shadow.bias = -0.0001; // Adjust bias to prevent shadow acne\n  scene.add(dir);\n\n  state.clock = new THREE.Clock();\n\n  // Return camera and scene along with renderer\n  return { renderer, camera, scene };\n}\n\n// Use the renderer reference from the outer scope\nexport function renderFrame() {\n  if (renderer) {\n    renderer.render(scene, camera);\n  } else {\n    console.error(\"Renderer not initialized yet!\");\n  }\n}"])</script><script>self.__next_f.push([1,"24:T55e,import { state } from 'state';\nexport function setupInput(camera) {\n  const k = state.key;\n  const canvas = document.getElementById('renderDiv'); // Target the container div\n\n  window.addEventListener('keydown', e =\u003e {\n      k[e.code] = true;\n      // Handle weapon switching\n      if (e.code === 'Digit1') state.activeWeapon = 'gun';\n      if (e.code === 'Digit2') state.activeWeapon = 'sword';\n      if (e.code === 'Escape' \u0026\u0026 state.isGameStarted \u0026\u0026 !state.isGameOver \u0026\u0026 !state.isUpgradeScreenVisible) {\n          state.isGamePaused = !state.isGamePaused;\n          state.isPauseMenuVisible = state.isGamePaused;\n          if (state.isGamePaused) {\n              document.exitPointerLock();\n          } else {\n              document.body.requestPointerLock();\n          }\n      }\n  });\n  window.addEventListener('keyup', e =\u003e k[e.code] = false);\n\n  canvas.addEventListener('mousedown', () =\u003e {\n    document.body.requestPointerLock();\n  });\n\n  document.addEventListener('mousemove', (event) =\u003e {\n    if (document.pointerLockElement === document.body \u0026\u0026 camera) {\n      camera.rotation.y -= (event.movementX / 500) * state.mouseSensitivity;\n      camera.rotation.x -= (event.movementY / 500) * state.mouseSensitivity;\n      // Clamp vertical rotation to avoid flipping\n      camera.rotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, camera.rotation.x));\n    }\n  });\n}25:T128b,"])</script><script>self.__next_f.push([1,"import { state } from 'state';\nlet audioContext;\nlet masterGain;\nfunction initAudio() {\n    // Only run once\n    if (audioContext) return;\n    try {\n        audioContext = new (window.AudioContext || window.webkitAudioContext)();\n        masterGain = audioContext.createGain();\n        masterGain.gain.value = state.masterVolume; // Use volume from state\n        masterGain.connect(audioContext.destination);\n    } catch (e) {\n        console.error(\"Web Audio API is not supported in this browser\");\n    }\n}\n\n// Call initAudio on the first user interaction to enable audio\ndocument.body.addEventListener('mousedown', initAudio, { once: true });\n\n// Creates a sharp, laser-like \"pew\" sound\nexport function playGunshotSound() {\n    if (!audioContext) return;\n\n    const oscillator = audioContext.createOscillator();\n    const gainNode = audioContext.createGain();\n    oscillator.connect(gainNode);\n    gainNode.connect(masterGain);\n\n    const now = audioContext.currentTime;\n    oscillator.type = 'sawtooth';\n    oscillator.frequency.setValueAtTime(600, now);\n    oscillator.frequency.exponentialRampToValueAtTime(100, now + 0.1);\n\n    gainNode.gain.setValueAtTime(1, now);\n    gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.15);\n\n    oscillator.start(now);\n    oscillator.stop(now + 0.2);\n}\n\n// Creates a crunchy, noise-based explosion sound\nexport function playExplosionSound() {\n    if (!audioContext) return;\n\n    const bufferSize = audioContext.sampleRate * 0.5; // Half-second buffer\n    const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);\n    const output = buffer.getChannelData(0);\n\n    // Fill buffer with white noise\n    for (let i = 0; i \u003c bufferSize; i++) {\n        output[i] = Math.random() * 2 - 1;\n    }\n\n    const noiseSource = audioContext.createBufferSource();\n    noiseSource.buffer = buffer;\n\n    const filter = audioContext.createBiquadFilter();\n    filter.type = 'lowpass';\n    filter.frequency.setValueAtTime(800, audioContext.currentTime);\n    filter.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.4);\n    \n    const gainNode = audioContext.createGain();\n    \n    noiseSource.connect(filter);\n    filter.connect(gainNode);\n    gainNode.connect(masterGain);\n    \n    const now = audioContext.currentTime;\n    gainNode.gain.setValueAtTime(0.8, now);\n    gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.4);\n\n    noiseSource.start(now);\n    noiseSource.stop(now + 0.5);\n}\n// Creates a low thud sound for player taking damage\nexport function playPlayerDamageSound() {\n    if (!audioContext) return;\n    const oscillator = audioContext.createOscillator();\n    const gainNode = audioContext.createGain();\n    oscillator.connect(gainNode);\n    gainNode.connect(masterGain);\n    const now = audioContext.currentTime;\n    oscillator.type = 'square'; // Square wave for a harsh, digital sound\n    oscillator.frequency.setValueAtTime(120, now); // Low pitch\n    oscillator.frequency.exponentialRampToValueAtTime(40, now + 0.15); // Pitch drops quickly\n    gainNode.gain.setValueAtTime(0.6, now); // Start loud\n    gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.15); // Fade out quickly\n    oscillator.start(now);\n    oscillator.stop(now + 0.2);\n}\n// Creates a whoosh sound for the sword swing\nexport function playSwordSwingSound() {\n    if (!audioContext) return;\n    \n    const bufferSize = audioContext.sampleRate * 0.3;\n    const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);\n    const output = buffer.getChannelData(0);\n    for (let i = 0; i \u003c bufferSize; i++) {\n        output[i] = (Math.random() * 2 - 1) * (1 - i / bufferSize); // Fading white noise\n    }\n    const noiseSource = audioContext.createBufferSource();\n    noiseSource.buffer = buffer;\n    const filter = audioContext.createBiquadFilter();\n    filter.type = 'bandpass';\n    filter.frequency.setValueAtTime(1000, audioContext.currentTime);\n    filter.frequency.exponentialRampToValueAtTime(4000, audioContext.currentTime + 0.2);\n    filter.Q.value = 5;\n    \n    const gainNode = audioContext.createGain();\n    gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);\n    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.25);\n    noiseSource.connect(filter);\n    filter.connect(gainNode);\n    gainNode.connect(masterGain);\n    noiseSource.start();\n    noiseSource.stop(audioContext.currentTime + 0.3);\n}\nexport function setMasterVolume(volume) {\n    if (masterGain) {\n        // Use a logarithmic curve for a more natural feel\n        const db = -40 * (1 - volume); // Convert linear 0-1 to dB range approx -40 to 0\n        masterGain.gain.setTargetAtTime(Math.pow(10, db / 20), audioContext.currentTime, 0.01);\n    }\n}"])</script><script>self.__next_f.push([1,"26:T4c8,import * as THREE from 'three';\nimport { camera } from 'renderer';\nimport { damp } from 'maath/easing';\nimport { state } from 'state';\n\nconst SHAKE_INTENSITY = 0.02;\nconst SHAKE_DAMPING = 8;\nconst MAX_SHAKE = 0.04;\n\nexport function addCameraRotation(movementX, movementY) {\n    if (!state.cameraShake) return;\n\n    // Add the immediate mouse movement to the shake vector\n    state.cameraShake.y += movementX * SHAKE_INTENSITY;\n    state.cameraShake.x += movementY * SHAKE_INTENSITY;\n\n    // Clamp the shake to prevent it from getting out of control\n    state.cameraShake.x = THREE.MathUtils.clamp(state.cameraShake.x, -MAX_SHAKE, MAX_SHAKE);\n    state.cameraShake.y = THREE.MathUtils.clamp(state.cameraShake.y, -MAX_SHAKE, MAX_SHAKE);\n}\n\nexport function updateCameraShake(dt) {\n    if (!state.cameraShake) return;\n\n    // Smoothly dampen the shake back to zero over time\n    damp(state.cameraShake, 'x', 0, SHAKE_DAMPING, dt);\n    damp(state.cameraShake, 'y', 0, SHAKE_DAMPING, dt);\n\n    // Apply the temporary shake offset to the camera's rotation\n    // We add it here and the input system subtracts it, creating a \"lag\" effect.\n    camera.rotation.x += state.cameraShake.x;\n    camera.rotation.y += state.cameraShake.y;\n}27:T924,"])</script><script>self.__next_f.push([1,"import * as THREE from 'three';\nimport { scene } from 'renderer';\n\nconst PARTICLE_COUNT = 500;\nconst particles = [];\nlet particleIndex = 0;\n\n// Use a single geometry and material for all particles for better performance\nconst particleGeometry = new THREE.BoxGeometry(0.1, 0.1, 0.1);\nconst particleMaterial = new THREE.MeshLambertMaterial({ color: 0x8B0000 }); // Dark red for a \"blood\" effect\n\nconst gravity = new THREE.Vector3(0, -9.8, 0);\n\nexport function setupParticles() {\n    for (let i = 0; i \u003c PARTICLE_COUNT; i++) {\n        const particle = new THREE.Mesh(particleGeometry, particleMaterial);\n        particle.visible = false;\n        scene.add(particle);\n        particles.push({\n            mesh: particle,\n            velocity: new THREE.Vector3(),\n            lifetime: 0,\n        });\n    }\n}\n\nexport function createExplosion(position, initialVelocity = new THREE.Vector3()) {\n    const explosionParticles = 20; // Number of particles per explosion\n    const explosionSpeed = 5;\n    for (let i = 0; i \u003c explosionParticles; i++) {\n        // Reuse particles from the pool\n        const p = particles[particleIndex];\n        \n        p.mesh.position.copy(position);\n        p.velocity.set(\n            (Math.random() - 0.5) * explosionSpeed,\n            (Math.random()) * explosionSpeed, // Give them an upward thrust\n            (Math.random() - 0.5) * explosionSpeed\n        );\n        p.velocity.addScaledVector(initialVelocity, 0.25); // Inherit 25% of the impact velocity\n        p.lifetime = Math.random() * 1.5 + 0.5; // Lifetime between 0.5 and 2 seconds\n        p.mesh.visible = true;\n        p.mesh.scale.set(1, 1, 1); // Reset scale\n\n        particleIndex = (particleIndex + 1) % PARTICLE_COUNT;\n    }\n}\n\nexport function updateParticles(dt) {\n    for (const p of particles) {\n        if (p.lifetime \u003e 0) {\n            p.lifetime -= dt;\n\n            if (p.lifetime \u003c= 0) {\n                p.mesh.visible = false;\n            } else {\n                // Apply physics\n                p.velocity.addScaledVector(gravity, dt);\n                p.mesh.position.addScaledVector(p.velocity, dt);\n\n                // Fade out effect by scaling down\n                const scale = Math.max(0, p.lifetime / 1.5); // Ensure scale is not negative\n                p.mesh.scale.set(scale, scale, scale);\n            }\n        }\n    }\n}"])</script><script>self.__next_f.push([1,"28:Teab,"])</script><script>self.__next_f.push([1,"import * as THREE from 'three';\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { camera } from 'renderer';\nimport { state } from 'state';\nimport { dampE, dampQ } from 'maath/easing';\nimport { playSwordSwingSound } from 'audio';\nexport let swordModel = null;\nconst SWORD_URL = 'https://play.rosebud.ai/assets/katana.glb?HNbg';\nconst originalPosition = new THREE.Vector3(0.2, -0.2, -0.5); // Adjusted for new scale\nconst originalRotation = new THREE.Euler(-0, Math.PI * -0.5, 0); // Adjusted for new model\n// --- Swing Animation ---\n// Define rotations for a downward slash\nconst swingStartRotation = new THREE.Quaternion().setFromEuler(new THREE.Euler(-Math.PI * 0.0, Math.PI * 0, 0));\nconst swingEndRotation = new THREE.Quaternion().setFromEuler(new THREE.Euler(Math.PI * -0.5, -Math.PI * 0, 0));\nlet targetQuaternion = new THREE.Quaternion().setFromEuler(originalRotation);\nconst SWING_ANIMATION_SPEED = 0.08;\nexport function triggerSwordSwing() {\n    const now = performance.now() / 1000;\n    if (now - state.lastSwordSwingTime \u003c state.swordSwingCooldown) return false;\n    state.isSwordSwinging = true;\n    state.lastSwordSwingTime = now;\n    playSwordSwingSound();\n    \n    // Set the initial target for the swing\n    targetQuaternion.copy(swingStartRotation);\n    \n    // After a short delay, set the end target\n    setTimeout(() =\u003e {\n        if(state.isSwordSwinging) targetQuaternion.copy(swingEndRotation);\n    }, 25);\n    // After the swing duration, mark it as finished\n    setTimeout(() =\u003e {\n        state.isSwordSwinging = false;\n    }, state.swordSwingCooldown * 1000 * 0.8); // End animation slightly before cooldown is up\n    return true; // Swing was successful\n}\nexport function loadSword() {\n    const loader = new GLTFLoader();\n    loader.load(SWORD_URL, (gltf) =\u003e {\n        swordModel = gltf.scene;\n\n        swordModel.traverse((child) =\u003e {\n            if (child.isMesh) {\n                child.castShadow = true;\n                // Use the model's own materials, but ensure they can cast shadows\n                child.material.metalness = 0.8;\n                child.material.roughness = 0.4;\n            }\n        });\n\n        // Scale and position the sword relative to the camera\n        swordModel.scale.set(0.05, 0.05, 0.05);\n        swordModel.position.copy(originalPosition);\n        swordModel.rotation.copy(originalRotation);\n\n        // Attach the sword model directly to the camera\n        camera.add(swordModel);\n\n        console.log('Sword model loaded and attached to camera.');\n    }, undefined, (error) =\u003e {\n        console.error('Error loading sword model:', error);\n    });\n}\n\n// Update function for animations\nexport function updateSwordAnimation(dt) {\n    if (!swordModel) return;\n    if (state.isSwordSwinging) {\n        // Smoothly swing the sword towards the current target rotation\n        dampQ(swordModel.quaternion, targetQuaternion, SWING_ANIMATION_SPEED, dt);\n    } else {\n        // When not swinging, return to original rotation and apply bobbing\n        targetQuaternion.setFromEuler(originalRotation); // Ensure target is the idle rotation\n        dampQ(swordModel.quaternion, targetQuaternion, SWING_ANIMATION_SPEED, dt);\n        // Gentle bobbing motion for idle state\n        const time = performance.now() * 0.001; // Convert time to seconds\n        const bobbleY = Math.sin(time * 2) * 0.02;\n        const bobbleX = Math.sin(time * 1.5) * 0.05;\n        \n        // Apply bobble on top of base position/rotation\n        swordModel.position.y = originalPosition.y + bobbleY;\n        \n        // This is tricky with quaternions, let's keep it simple for now and maybe add later if needed.\n        // It might be better to add the bobble to a parent container instead.\n    }\n}"])</script><script>self.__next_f.push([1,"9:[\"$\",\"div\",null,{\"className\":\"page_Root__7Tnnx\",\"children\":[\"$\",\"$L17\",null,{\"mode\":\"Multifile\",\"files\":[{\"id\":\"d2804f4d-d623-409c-bd41-bf339dd9c75e\",\"name\":\"gun.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$18\",\"created\":\"2025-06-13T19:51:38.502363Z\",\"modified\":\"2025-06-13T19:51:38.502376Z\"},{\"id\":\"d9f19f2f-2203-426d-8d72-8e87ef8de0e5\",\"name\":\"SimplePhysics.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$19\",\"created\":\"2025-06-13T19:51:38.502404Z\",\"modified\":\"2025-06-13T19:51:38.502408Z\"},{\"id\":\"7d42529c-583d-40b1-a47d-0b096f829345\",\"name\":\"zombie.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$1a\",\"created\":\"2025-06-13T19:51:38.502422Z\",\"modified\":\"2025-06-13T19:51:38.502425Z\"},{\"id\":\"b0e3a514-255f-4f47-b903-1c03772dd9dd\",\"name\":\"simplePhysicsSystem.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$1b\",\"created\":\"2025-06-13T19:51:38.502438Z\",\"modified\":\"2025-06-13T19:51:38.502441Z\"},{\"id\":\"71aeefff-350b-4b94-8cc4-96e19ae42f2f\",\"name\":\"main.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$1c\",\"created\":\"2025-06-13T19:51:38.502454Z\",\"modified\":\"2025-06-13T19:51:38.502457Z\"},{\"id\":\"dcc4fe3c-1455-4334-a209-4ab052976851\",\"name\":\"collisionWorld.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$1d\",\"created\":\"2025-06-13T19:51:38.502469Z\",\"modified\":\"2025-06-13T19:51:38.502473Z\"},{\"id\":\"1935f6a6-87c6-4a05-a38b-f4ba9dd6b407\",\"name\":\"musicManager.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$1e\",\"created\":\"2025-06-13T19:51:38.502485Z\",\"modified\":\"2025-06-13T19:51:38.502488Z\"},{\"id\":\"5ce2500e-70c9-4c18-8b34-aa2e47d436d2\",\"name\":\"state.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$1f\",\"created\":\"2025-06-13T19:51:38.502500Z\",\"modified\":\"2025-06-13T19:51:38.502504Z\"},{\"id\":\"27d2d7eb-70fc-40aa-92f4-f7597a7f2f2f\",\"name\":\"ammo.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$20\",\"created\":\"2025-06-13T19:51:38.502520Z\",\"modified\":\"2025-06-13T19:51:38.502524Z\"},{\"id\":\"f4fa7e9f-499f-44ec-8159-18c084842472\",\"name\":\"playerMusic.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$21\",\"created\":\"2025-06-13T19:51:38.502536Z\",\"modified\":\"2025-06-13T19:51:38.502539Z\"},{\"id\":\"a58af001-9f45-4c41-9078-f6395f8cc9ae\",\"name\":\"upgrades.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$22\",\"created\":\"2025-06-13T19:51:38.502551Z\",\"modified\":\"2025-06-13T19:51:38.502554Z\"},{\"id\":\"e372036f-af1a-496f-b4e3-26091b43cce5\",\"name\":\"renderer.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$23\",\"created\":\"2025-06-13T19:51:38.502566Z\",\"modified\":\"2025-06-13T19:51:38.502568Z\"},{\"id\":\"28ae9777-9c29-409c-890d-ee41fd528ce6\",\"name\":\"input.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$24\",\"created\":\"2025-06-13T19:51:38.502581Z\",\"modified\":\"2025-06-13T19:51:38.502584Z\"},{\"id\":\"190fcf1a-228d-463d-8038-7cec107aaa97\",\"name\":\"audio.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$25\",\"created\":\"2025-06-13T19:51:38.502598Z\",\"modified\":\"2025-06-13T19:51:38.502601Z\"},{\"id\":\"553f4316-3856-4694-aaf0-307eb45d4f9f\",\"name\":\"cameraEffects.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$26\",\"created\":\"2025-06-13T19:51:38.502613Z\",\"modified\":\"2025-06-13T19:51:38.502617Z\"},{\"id\":\"40533684-9a4a-4571-96ff-ff3dda189392\",\"name\":\"particles.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$27\",\"created\":\"2025-06-13T19:51:38.502635Z\",\"modified\":\"2025-06-13T19:51:38.502639Z\"},{\"id\":\"8a0b9c94-684e-4a17-9283-4422411dd391\",\"name\":\"sword.js\",\"path\":\"/\",\"permissions\":\"rw\",\"metadata\":{},\"content\":\"$28\",\"created\":\"2025-06-13T19:51:38.502652Z\",\"modified\":\"2025-06-13T19:51:38.502655Z\"}],\"projectId\":\"9a5a089c-dbf2-4e0f-83a6-49a671b76f62\",\"revisionId\":\"73f8eed3-e86e-4d2e-9cc0-d094856ffd31\",\"name\":\"FPS Example\",\"description\":\"\",\"creatorId\":\"aedeb2f4-a458-465d-90b7-f04357a6bca4\",\"creatorUsername\":\"troydoling24.0rbP\",\"sourceProjectName\":\"FPS Example\",\"sourceProjectId\":\"6b51a6f1-288b-4579-9b81-068d49c81b1f\",\"enableRemixButton\":true}]}]\n"])</script><script>self.__next_f.push([1,"16:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"FPS Example üïπÔ∏è Rosebud AI Vibe Code Games\"}],[\"$\",\"meta\",\"1\",{\"property\":\"og:title\",\"content\":\"FPS Example üïπÔ∏è Rosebud AI Vibe Code Games\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:image\",\"content\":\"https://rosebud.ai/assets/rosebud-og-img.png?timestamp=1749844301650\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"5\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:site\",\"content\":\"@Rosebud_AI\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:title\",\"content\":\"FPS Example üïπÔ∏è Rosebud AI Vibe Code Games\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:image\",\"content\":\"https://rosebud.ai/assets/rosebud-og-img.png?timestamp=1749844301650\"}],[\"$\",\"link\",\"9\",{\"rel\":\"icon\",\"href\":\"/icon-xg4ifa.ico?bb8c6c90c9f8e9a0\",\"type\":\"image/x-icon\",\"sizes\":\"48x48\"}],[\"$\",\"link\",\"10\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon-xg4ifa.png?847505468c59a344\",\"type\":\"image/png\",\"sizes\":\"180x180\"}]],\"error\":null,\"digest\":\"$undefined\"}\n10:{\"metadata\":\"$16:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script>$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data="$!",a.setAttribute("data-dgst",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if("/$"===d)if(0===f)break;else f--;else"$"!==d&&"$?"!==d&&"$!"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data="$"}b._reactRetry&&b._reactRetry()}};$RC("B:0","S:0")</script><script>$RC("B:1","S:1")</script><script src="./culturekill_v1_files/js(6)" async="" data-nscript="afterInteractive"></script><script id="google-analytics" data-nscript="afterInteractive">
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-1FHLBFMWCR');
        </script><script id="google-tag-manager" data-nscript="afterInteractive">
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','GTM-W7XHRXFL');
        </script><script src="./culturekill_v1_files/js(7)" async="" data-nscript="afterInteractive"></script><script id="google-ads-1" data-nscript="afterInteractive">
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'AW-410098193');
        </script><script src="./culturekill_v1_files/js(8)" async="" data-nscript="afterInteractive"></script><script id="google-ads-2" data-nscript="afterInteractive">
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'AW-16550328878');
        </script><script id="hotjar-script" data-nscript="afterInteractive">
            (function(h,o,t,j,a,r){
                h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
                h._hjSettings={hjid:3822970,hjsv:6};
                a=o.getElementsByTagName('head')[0];
                r=o.createElement('script');r.async=1;
                r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
                a.appendChild(r);
            })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
        </script><script type="text/javascript" id="" charset="">!function(d,h,e){d.TiktokAnalyticsObject=e;var a=d[e]=d[e]||[];a.methods="page track identify instances debug on off once ready alias group enableCookie disableCookie holdConsent revokeConsent grantConsent".split(" ");a.setAndDefer=function(b,c){b[c]=function(){b.push([c].concat(Array.prototype.slice.call(arguments,0)))}};for(d=0;d<a.methods.length;d++)a.setAndDefer(a,a.methods[d]);a.instance=function(b){b=a._i[b]||[];for(var c=0;c<a.methods.length;c++)a.setAndDefer(b,a.methods[c]);return b};a.load=
            function(b,c){var f="https://analytics.tiktok.com/i18n/pixel/events.js",g=c&&c.partner;a._i=a._i||{};a._i[b]=[];a._i[b]._u=f;a._i[b]._partner=g||"GoogleTagManagerClient";a._t=a._t||{};a._t[b]=+new Date;a._o=a._o||{};a._o[b]=c||{};a._partner=a._partner||"GoogleTagManagerClient";c=document.createElement("script");c.type="text/javascript";c.async=!0;c.src=f+"?sdkid\x3d"+b+"\x26lib\x3d"+e;b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(c,b)};a.load("CNOCDH3C77U3N71L0DEG");a.page()}(window,
            document,"ttq");
        </script><script id="hotjar-identify-script">
            var userId = 'aedeb2f4-a458-465d-90b7-f04357a6bca4' || null;
            window.hj('identify', userId, {
                'Is New Rosebud User (joined < 48h)': false,
                'Firebase Id': 'yMUWZ4oF35YZ4hDVqfRl4snPWvq2',
            });
        </script>
        <noscript></noscript>
        <div class="page_Root__7Tnnx">
            <div class="GenericCanvasContainer_Root__IxnDc"><iframe src="./culturekill_v1_files/esm-react.html" class="GenericCanvasContainer_RenderDiv__xU0or" sandbox="allow-scripts allow-same-origin allow-pointer-lock allow-downloads allow-forms allow-popups" allow="accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; payment; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth;" data-hj-allow-iframe="true"></iframe></div>
            <button class="BrandedCanvas_RosebudBadge__vd9_x">
                <div class="BrandedCanvas_RosebudBadgeContent__qTH_X">
                    <div class="BrandedCanvas_DefaultContent__awxfL"><img alt="Rosebud Logo" loading="lazy" width="16" height="16" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Frosebud-icon.c85b2e50.png&amp;w=16&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Frosebud-icon.c85b2e50.png&amp;w=32&amp;q=75 2x" src="file:///C:/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Frosebud-icon.c85b2e50.png&amp;w=32&amp;q=75" style=""><span>Rosebud AI</span></div>
                    <div class="BrandedCanvas_HoverContent__rVhEr">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M13 6.625V5.167h-1.429v1.458h-1.428v1.458H8.714v1.459H7.286V8.083H5.857V6.625H4.43V5.167H3v1.458h1.429v1.458h1.428v1.459h1.429V11h1.428V9.542h1.429V8.083h1.428V6.625z"></path>
                        </svg>
                        <span>Create</span>
                    </div>
                </div>
                <div class="BrandedCanvas_CloseButton__Nym92">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M2.5 2.5h1.571v1.571H2.5zm3.143 3.143H4.07V4.07h1.572zm1.571 1.571H5.643V5.643h1.571zm1.572 0H7.214v1.572H5.643v1.571H4.07v1.572H2.5V13.5h1.571v-1.571h1.572v-1.572h1.571V8.786h1.572v1.571h1.571v1.572h1.572V13.5H13.5v-1.571h-1.571v-1.572h-1.572V8.786H8.786zm1.571-1.571v1.571H8.786V5.643zM11.93 4.07v1.572h-1.572V4.07zm0 0V2.5H13.5v1.571z"></path>
                        <path d="M12.429 3.571V3H13v.571zm-1.572 1.572V4.57h.572v.572zM9.286 6.714v-.571h.571v.571zm-1 1v.572h-.572v-.572zM6.143 6.143h.571v.571h-.571zM4.57 4.57h.572v.572H4.57zm-1-1H3V3h.571zm3.143 5.715v.571h-.571v-.571zm-1.571 1.571v.572H4.57v-.572zM3.57 12.43V13H3v-.571zm6.286-2.572h-.571v-.571h.571zm1 1h.572v.572h-.572zm1.572 1.572H13V13h-.571z"></path>
                    </svg>
                </div>
            </button>
            <footer class="BrandedCanvas_ProjectInfoContainer__GovzP">
                <img alt="Bloom background effect" decoding="async" data-nimg="fill" class="BloomBackground_Root__OBMbk" sizes="100vw" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbloom-background.9823c67f.jpg&amp;w=640&amp;q=100 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbloom-background.9823c67f.jpg&amp;w=750&amp;q=100 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbloom-background.9823c67f.jpg&amp;w=828&amp;q=100 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbloom-background.9823c67f.jpg&amp;w=1080&amp;q=100 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbloom-background.9823c67f.jpg&amp;w=1200&amp;q=100 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbloom-background.9823c67f.jpg&amp;w=1920&amp;q=100 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbloom-background.9823c67f.jpg&amp;w=2048&amp;q=100 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbloom-background.9823c67f.jpg&amp;w=3840&amp;q=100 3840w" src="file:///C:/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbloom-background.9823c67f.jpg&amp;w=3840&amp;q=100" style="position: absolute; height: 100%; width: 100%; inset: 0px;">
                <section class="BrandedCanvas_ProjectInfo__dmK5M">
                    <div><a class="BrandedCanvas_VibeCodeGameLink__5_nUb" href="file:///C:/"><img alt="Rosebud Logo" loading="lazy" width="20" height="20" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Frosebud-icon.c85b2e50.png&amp;w=32&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Frosebud-icon.c85b2e50.png&amp;w=48&amp;q=75 2x" src="file:///C:/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Frosebud-icon.c85b2e50.png&amp;w=48&amp;q=75" style="">Vibe code game</a></div>
                    <div class="BrandedCanvas_TitleContainer__6MvEy">
                        <h2>Project Title</h2>
                        <p>FPS Example</p>
                        <button class="BrandedCanvas_RemixButton__wzxD1" data-state="closed">
                            <svg width="16" height="16" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M1.25 5.18742V9.09339H5.15751H9.06503L9.04811 8.09383L9.0312 7.09427L7.10896 7.07803L5.18673 7.06179V6.14152V5.22131L6.15554 5.20433L7.12434 5.18742L7.14132 4.24937L7.1583 3.31132H10.017H12.8757V4.26475V5.21817H13.8598H14.844V6.20236V7.18654H15.7975H16.7509V10.0161V12.8456H15.7975H14.844V13.8298V14.814H13.8598H12.8757V15.7674V16.7208H10.017H7.1583L7.14132 15.7828L7.12434 14.8447L6.15707 14.8278L5.18987 14.8108L5.17289 13.8436L5.15598 12.8763L4.18717 12.8594L3.21837 12.8425V11.8906V10.9387H2.23418H1.25V11.9537V12.9686H2.20183H3.15366L3.17063 13.9067L3.18761 14.8447L4.15488 14.8616L5.12208 14.8786L5.13906 15.8458L5.15598 16.8131L6.09243 16.8301L7.02887 16.847L7.04585 17.7835L7.06283 18.7199H9.98462H12.9064L12.9234 17.7834L12.9404 16.847L13.9076 16.83L14.8748 16.8131L14.8917 15.8443L14.9087 14.8755H15.8605H16.8124V13.9236V12.9717L17.7812 12.9548L18.75 12.9379V10.0161V7.09427L17.7812 7.07736L16.8124 7.06038V6.10855V5.15666H15.8605H14.9087L14.8917 4.18786L14.8748 3.21905L13.906 3.20214L12.9372 3.18516V2.23272V1.28027L10 1.2962L7.06283 1.3122L7.04585 2.24865L7.02887 3.1851L6.09243 3.20207L5.15598 3.21905L5.13906 4.18786L5.12208 5.15666H4.17026H3.21837V3.21905V1.28144H2.23418H1.25V5.18742Z" fill="currentColor"></path>
                            </svg>
                            Remix this game
                        </button>
                    </div>
                    <div>
                        <h2>Description</h2>
                        <p></p>
                    </div>
                    <div class="BrandedCanvas_CreditsContainer__E1Pwq">
                        <div class="BrandedCanvas_CreditsRow__8c97A"><label for="created-by">Created By</label><a href="file:///C:/profile/aedeb2f4-a458-465d-90b7-f04357a6bca4" id="created-by" target="_blank" rel="noreferrer">troydoling24.0rbP</a></div>
                        <div class="BrandedCanvas_CreditsRow__8c97A"><label for="remixed-from">Remixed from</label><a href="file:///C:/p/6b51a6f1-288b-4579-9b81-068d49c81b1f" id="remixed-from" target="_blank" rel="noreferrer">FPS Example</a></div>
                    </div>
                </section>
            </footer>
        </div>
        <script src="./culturekill_v1_files/js(9)" async="" data-nscript="afterInteractive"></script><script id="google-analytics" data-nscript="afterInteractive">
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-1FHLBFMWCR');
        </script><script id="google-tag-manager" data-nscript="afterInteractive">
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','GTM-W7XHRXFL');
        </script><script src="./culturekill_v1_files/js(10)" async="" data-nscript="afterInteractive"></script><iframe allow="join-ad-interest-group" data-tagging-id="AW-410098193" data-load-time="1749890354121" height="0" width="0" src="./culturekill_v1_files/410098193.html" style="display: none; visibility: hidden;"></iframe><script id="google-ads-1" data-nscript="afterInteractive">
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'AW-410098193');
        </script><script src="./culturekill_v1_files/js(11)" async="" data-nscript="afterInteractive"></script><script id="google-ads-2" data-nscript="afterInteractive">
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'AW-16550328878');
        </script><script id="hotjar-script" data-nscript="afterInteractive">
            (function(h,o,t,j,a,r){
                h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
                h._hjSettings={hjid:3822970,hjsv:6};
                a=o.getElementsByTagName('head')[0];
                r=o.createElement('script');r.async=1;
                r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
                a.appendChild(r);
            })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
        </script>
        <next-route-announcer style="position: absolute;">
            <template shadowrootmode="open">
                <div aria-live="assertive" id="__next-route-announcer__" role="alert" style="position: absolute; border: 0px; height: 1px; margin: -1px; padding: 0px; width: 1px; clip: rect(0px, 0px, 0px, 0px); overflow: hidden; white-space: nowrap; overflow-wrap: normal;"></div>
            </template>
        </next-route-announcer>
    </body>
</html>
