"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3172],{23172:(e,t,a)=>{a.d(t,{As:()=>w,lB:()=>n.l});var n=a(86786),r=a(26715),s=a(59362),i=a(16203),o=a(12115),u=a(88248),l=a(42520),c=a(99975),d=a(71086),p=a(35695),h=a(70247);let m="rosebud_auth_email",y=!1,g=()=>{let{setAuthMessage:e,authStatus:t,setAuthStatus:a,setDialogOpen:s}=(0,n.l)(),l=(0,h.Y)(),g=(0,r.jE)(),f=(0,p.useRouter)(),T=(0,o.useCallback)(async(t,a)=>{let n=""===a?"https://rosebud.ai/":a;if(!n)return console.error("Improperly configured sign in with email redirect_uri!"),{success:!1};if(l){let e=new URL(n);Object.keys(l).forEach(t=>{let a=l[t];a&&e.searchParams.append(t,a)}),n=e.toString()}let r={url:n,handleCodeInApp:!0};window.localStorage.setItem(m,t);try{return await (0,i.MN)(c.e7,t,r),e("success","Email sent. Please check your inbox."),{success:!0}}catch(t){return(0,c.nF)(t),console.error("Error sending email link:",t),e("error","Error sending the sign-in link. Please try again."),{success:!1}}},[e,l]),w=(0,o.useCallback)(async()=>{try{let t=window.localStorage.getItem(m);if(!t)return void e("error","Invalid Sign In Link. Please try again.");let n=await (0,i.hK)(c.e7,t,window.location.href),{isNewUser:r}=(0,i.B8)(n)||{isNewUser:!1},s={provider:"firebase",token:await n.user.getIdToken(),...r&&l?{utm:l}:{}},o=await (0,u.Uu)(s);d.J.set(o),g.invalidateQueries({queryKey:["users","me"]}),window.localStorage.removeItem(m),a("AUTHENTICATED"),(0,c.h2)()}catch(t){(0,c.nF)(t),console.error("Error signing in with email link:",t),e("error","There was an error signing you in. Please try again."),a("ANONYMOUS")}finally{f.replace("/")}},[e,l,a,f,g]);return(0,o.useEffect)(()=>{y||"INITIAL"!==t||((0,i.Pj)(c.e7,window.location.href)&&(s(!0),a("SIGNING_IN"),w()),y=!0)},[w,t,a,s]),{handleEmailSignIn:T,handleEmailLinkSignIn:w}};var f=a(23915);let T=()=>{let{setAuthMessage:e,setAuthStatus:t}=(0,n.l)(),a=(0,h.Y)(),s=(0,r.jE)();return{handleOAuthSignIn:(0,o.useCallback)(async n=>{t("SIGNING_IN");try{let e=await (0,i.df)(c.e7,n),{isNewUser:r}=(0,i.B8)(e)||{isNewUser:!1},o={provider:"firebase",token:await e.user.getIdToken(),...r&&a?{utm:a}:{}},l=await (0,u.Uu)(o);return d.J.set(l),s.invalidateQueries({queryKey:["users","me"]}),(0,c.h2)(),t("AUTHENTICATED"),{success:!0}}catch(a){if(t("ANONYMOUS"),a instanceof f.g)switch(a.code){case"auth/account-exists-with-different-credential":e("error","An account with the same email already exists with a different sign-in provider. Please try a different method.");break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":e("error","You closed the popup. Please try again.");break;default:console.error(a),e("error","There was an error signing you in. Please try again.")}else(0,c.nF)(a),console.error(a),e("error","There was an error signing you in. Please try again.");return{success:!1}}},[e,t,a,s])}},w=()=>{let e=(0,r.jE)(),{authStatus:t,setAuthStatus:a,setSuccessfulLoginHandler:p,setDialogOpen:h,setAuthMessage:m}=(0,n.l)(),{handleOAuthSignIn:y}=T(),{handleEmailSignIn:f}=g(),w=(0,l.sg)("INITIAL"!==t),E=(0,o.useCallback)(()=>{(0,i.CI)(c.e7),(0,c.mR)(),e.clear(),d.J.clear(),a("LOADING_ANONYMOUS"),(0,u.Os)().then(e=>{d.J.set(e),a("ANONYMOUS")})},[e,a]),v=(0,o.useCallback)(async t=>{let{callbackIfSignedIn:n,callbackIfSignedOut:r,autoCloseDialog:i}=t,o=d.J.getRosebudToken();if(!o){a("LOADING_ANONYMOUS");try{let e=await (0,u.Os)();d.J.set(e),o=e,a("ANONYMOUS")}catch(e){console.error("Failed to sign in anonymously:",e),a("INITIAL"),null==r||r(),n&&p(()=>{i&&h(!1),n(),p(()=>{})}),h(!0);return}}if(o&&0>=d.J.getSecondsTilExpiry()){E(),a("LOADING_ANONYMOUS");try{let e=await (0,u.Os)();d.J.set(e),a("ANONYMOUS"),m("warning","Your session has expired. Please sign in again to continue.")}catch(e){console.error("Failed to sign in anonymously:",e),a("INITIAL")}null==r||r(),n&&p(()=>{i&&h(!1),n(),p(()=>{})}),h(!0);return}e.invalidateQueries({queryKey:["users","me"]});try{(await e.fetchQuery({queryKey:["users","me",o],queryFn:u.HW})).is_anonymous?(a("ANONYMOUS"),null==r||r(),n&&p(()=>{i&&h(!1),n(),p(()=>{})}),h(!0)):(a("AUTHENTICATED"),null==n||n());return}catch(e){var l,c;console.error("Error fetching user data in requireSignIn:",e),(0,s.F0)(e)&&(null==(l=e.response)?void 0:l.status)===401?(E(),m("warning","Your session has expired. Please sign in again to continue.")):(0,s.F0)(e)&&(null==(c=e.response)?void 0:c.status)===429&&m("error","Too many requests. Please wait a moment and try again."),null==r||r(),n&&p(()=>{i&&h(!1),n(),p(()=>{})}),h(!0)}},[E,a,m,p,h,e]),_=(0,o.useCallback)(async()=>{let e=d.J.getRosebudToken();if(!e)throw Error("Not authenticated");if(!d.J.isAccessTokenExpired())return e.access;if(d.J.isRefreshTokenExpired())throw console.error("Refresh token expired"),Error("Refresh token expired");try{let{access:t}=await (0,u.iD)({refresh:e.refresh});return d.J.set({access:t,refresh:e.refresh}),t}catch(e){throw console.error("Failed to refresh access token:",e),Error("Failed to refresh access token")}},[]);return(0,o.useEffect)(()=>{if("INITIAL"===t){if((0,i.Pj)(c.e7,window.location.href))return void console.log("isSignInWithEmailLink",window.location.href);(async()=>{let t=d.J.getRosebudToken();if(!t||0>=d.J.getSecondsTilExpiry())return E();e.invalidateQueries({queryKey:["users","me"]});try{(await e.fetchQuery({queryKey:["users","me",t],queryFn:u.HW})).is_anonymous?a("ANONYMOUS"):a("AUTHENTICATED")}catch(e){console.error("Error fetching user data in useEffect:",e)}})()}},[t,e,a,E]),{user:w.data,signOut:E,requireSignIn:v,handleOAuthSignIn:y,handleEmailSignIn:f,getFreshAccessToken:_}}},42520:(e,t,a)=>{a.d(t,{wu:()=>y,EV:()=>v,ef:()=>_,eL:()=>I,sg:()=>O,YC:()=>S,if:()=>h,NB:()=>E,f3:()=>m,tL:()=>f,bU:()=>T,uT:()=>g,tz:()=>b,gd:()=>k});var n=a(26715),r=a(5041),s=a(99145),i=a(52020),o=a(95838),u=a(59362),l=a(70689);let c=e=>{let t=(0,r.n)(e);return{...t,mutate:(e,a)=>{t.isPending?console.warn("Mutation already in progress. Skipping duplicate request."):t.mutate(e,a)}}};var d=a(71086),p=a(88248);let h=e=>{let{onMutate:t,onSuccess:a,onSettled:s}=e,i=(0,n.jE)(),{setOpen:o,setContent:c}=(0,l.s)();return(0,r.n)({mutationKey:["assets","generate"],mutationFn:p.Ii,onMutate:t,onSuccess:e=>{let t=i.getQueryData(["assets",{ordering:"-created"}])||[];i.setQueryData(["assets",{ordering:"-created"}],[e,...t]),null==a||a(e)},onError:e=>{o(!0);let t=e.message;if((0,u.F0)(e)){var a,n,r,s,i,l,d,p;(null==(n=e.response)||null==(a=n.data)?void 0:a.detail)?t=null==(l=e.response)||null==(i=l.data)?void 0:i.detail:(null==(s=e.response)||null==(r=s.data)?void 0:r.text)&&(t=null==(p=e.response)||null==(d=p.data)?void 0:d.text)}c({title:"Asset generation failed.",body:t})},onSettled:()=>{i.invalidateQueries({queryKey:["assets",{ordering:"-created"}]}),null==s||s()}})},m=()=>{let e=(0,n.jE)(),{setOpen:t,setContent:a}=(0,l.s)();return c({mutationFn:p.BL,onError:e=>{var n;let r=null==(n=e.response)?void 0:n.status;t(!0),a({title:"Error!",body:403===r?"You do not have permissions to clone this project. It is likely that the creator has disabled remixing.":"Failed to create project. Please try again later and let us know if the issue persists."})},onSettled:()=>{e.invalidateQueries({queryKey:["projects",{ordering:"-modified"}]}),e.invalidateQueries({queryKey:["assets",{ordering:"-created"}]})}})},y=()=>{let e=(0,n.jE)(),{setOpen:t,setContent:a}=(0,l.s)();return(0,r.n)({mutationFn:async e=>{let{projectId:t,assetId:a}=e;return await (0,p._5)(t,a)},onError:e=>{t(!0);let n=e.message;if((0,u.F0)(e)){var r,s,i,o,l,c,d,p;(null==(s=e.response)||null==(r=s.data)?void 0:r.detail)?n=null==(c=e.response)||null==(l=c.data)?void 0:l.detail:(null==(o=e.response)||null==(i=o.data)?void 0:i.text)&&(n=null==(p=e.response)||null==(d=p.data)?void 0:d.text)}a({title:"Failed to add asset to project",body:n})},onSuccess:(t,a)=>{let{projectId:n}=a;e.invalidateQueries({queryKey:["projects",n]}),e.invalidateQueries({queryKey:["assets",{ordering:"-created"}]})}})},g=()=>{let e=(0,n.jE)(),{setOpen:t,setContent:a}=(0,l.s)();return(0,r.n)({mutationFn:async e=>{let{projectId:t,assetId:a}=e;return await (0,p.Y7)(t,a)},onError:e=>{t(!0);let n=e.message;if((0,u.F0)(e)){var r,s,i,o,l,c,d,p;(null==(s=e.response)||null==(r=s.data)?void 0:r.detail)?n=null==(c=e.response)||null==(l=c.data)?void 0:l.detail:(null==(o=e.response)||null==(i=o.data)?void 0:i.text)&&(n=null==(p=e.response)||null==(d=p.data)?void 0:d.text)}a({title:"Failed to remove asset from project",body:n})},onSuccess:(t,a)=>{let{projectId:n}=a;e.invalidateQueries({queryKey:["projects",n]}),e.invalidateQueries({queryKey:["assets",{ordering:"-created"}]})}})},f=()=>{let e=(0,n.jE)();return(0,r.n)({mutationFn:p.rU,onSettled:()=>{e.invalidateQueries({queryKey:["published-projects"]})}})},T=(e,t)=>{let a=t?t.next:null,n=t?{pageParams:[1],pages:[{count:t.count,next:a,previous:null,results:t.results}]}:void 0;return(0,s.q)({queryKey:["published-projects",e],queryFn:t=>{let{pageParam:a}=t;return(0,p.kY)({...e,page:a})},initialPageParam:1,getNextPageParam:e=>{if(e.next){let t=new URL(e.next).searchParams.get("page");return t?parseInt(t,10):void 0}},staleTime:3e5,initialData:n})},w={ordering:"-created",search:"",page_size:25},E=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e={...w,...e},(0,s.q)({queryKey:["assets",e],queryFn:t=>{let{pageParam:a}=t;return(0,p.NH)({page:a,...e})},initialPageParam:1,getNextPageParam:e=>{if(e.next){let t=new URL(e.next).searchParams.get("page");return t?parseInt(t,10):void 0}},placeholderData:i.rX,enabled:t})},v=e=>(0,o.I)({queryKey:["asset-generation-models",e],queryFn:()=>(0,p.sM)(e)}),_=()=>{let e=(0,n.jE)();return(0,r.n)({mutationKey:["chats","create"],mutationFn:p.RL,onSuccess:()=>e.invalidateQueries({queryKey:["chats"]})})},k=function(){let{onSettled:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.jE)();return(0,r.n)({mutationKey:["revisions","update"],mutationFn:p.tK,onSuccess:()=>t.invalidateQueries({queryKey:["revisions"]}),onSettled:e})},S=()=>{let e=(0,n.jE)();return(0,r.n)({mutationKey:["revisions","delete"],mutationFn:p.ln,onSettled:()=>{e.invalidateQueries({queryKey:["revisions"]}),e.invalidateQueries({queryKey:["projects"]})}})},I=()=>{let e=(0,n.jE)();return(0,r.n)({mutationKey:["files","create"],mutationFn:p.Uf,onSuccess:t=>{e.invalidateQueries({queryKey:["files",{revision:t.revision}]})}})},b=()=>{let e=(0,n.jE)();return(0,r.n)({mutationKey:["files","update"],mutationFn:p.V1,onSuccess:t=>{e.invalidateQueries({queryKey:["files",{revision:t.revision}]}),e.invalidateQueries({queryKey:["files",t.id]})}})},O=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=d.J.getRosebudToken(),a=d.J.getSecondsTilAccessTokenExpiry()>0?1e3*d.J.getSecondsTilAccessTokenExpiry():36e5;return(0,o.I)({queryKey:["users","me",t],queryFn:p.HW,enabled:!!t&&e,staleTime:a,retry:(e,t)=>{var a,n;return(0,u.F0)(t)&&(null==(a=t.response)?void 0:a.status)===429?e<3:!(t instanceof Error&&"Token expired."===t.message||(0,u.F0)(t)&&(null==(n=t.response)?void 0:n.status)===401)&&e<1},retryDelay:(e,t)=>{var a;if((0,u.F0)(t)&&(null==(a=t.response)?void 0:a.status)===429){let a=t.response.headers["retry-after"],n=a?parseInt(a,10):0;return n>0?1e3*n:Math.min(1e3*2**e,1e4)}return 1e3}})}},70247:(e,t,a)=>{a.d(t,{Y:()=>u,k:()=>o});var n=a(35695),r=a(12115);let s="rosebud_";var i=function(e){return e.SOURCE="utm_source",e.MEDIUM="utm_medium",e.CAMPAIGN="utm_campaign",e.CONTENT="utm_content",e.TERM="utm_term",e}(i||{});function o(){let e=(0,n.useSearchParams)();(0,r.useEffect)(()=>{let t=e.get("utm_source");t&&localStorage.setItem(s+"utm_source",t);let a=e.get("utm_medium");a&&localStorage.setItem(s+"utm_medium",a);let n=e.get("utm_campaign");n&&localStorage.setItem(s+"utm_campaign",n);let r=e.get("utm_content");r&&localStorage.setItem(s+"utm_content",r);let i=e.get("utm_term");i&&localStorage.setItem(s+"utm_term",i)},[e])}function u(){let e=null;for(let t of Object.values(i)){let a=localStorage.getItem(s+t);a&&(null===e&&(e={}),e[t]=a)}return e}},70689:(e,t,a)=>{a.d(t,{M:()=>r,s:()=>s});var n=a(12115);let r=n.createContext({open:!1,setOpen:()=>{},content:null,setContent:()=>{}}),s=()=>{let e=(0,n.useContext)(r);if(!e)throw Error("useDialog must be used within a DialogContextProvider");return e}},71086:(e,t,a)=>{a.d(t,{J:()=>s});var n=a(86447);class r{load(){let e=localStorage.getItem(this._LOCALSTORAGE_KEY);e?this._token=JSON.parse(e):this._token=null}getRosebudToken(){return this.isAccessTokenExpired()&&this.isRefreshTokenExpired()&&(this.expired=!0),this._token}set(e){this.expired=!1,localStorage.setItem(this._LOCALSTORAGE_KEY,JSON.stringify(e)),this._token=e}clear(){localStorage.removeItem(this._LOCALSTORAGE_KEY),this._token=null}_parseToken(e){return JSON.parse(atob(e.split(".")[1]))}_isTokenExpired(e){let t=this._parseToken(e);return Math.floor(Date.now()/1e3)>=t.exp}_handleStorageChange(e){e.key===this._LOCALSTORAGE_KEY&&this.load()}isAccessTokenExpired(){return!this._token||this._isTokenExpired(this._token.access)}isRefreshTokenExpired(){return!this._token||this._isTokenExpired(this._token.refresh)}getSecondsTilExpiry(){return this._token?Math.max(this._parseToken(this._token.access).exp,this._parseToken(this._token.refresh).exp)-Date.now()/1e3:-1}getSecondsTilAccessTokenExpiry(){return this._token?this._parseToken(this._token.access).exp-Date.now()/1e3:-1}getSecondsTilRefreshTokenExpiry(){return this._token?this._parseToken(this._token.refresh).exp-Date.now()/1e3:-1}constructor(){(0,n._)(this,"_LOCALSTORAGE_KEY","rosebud_auth_token"),(0,n._)(this,"_token",null),(0,n._)(this,"expired",!1),this.load=this.load.bind(this),this.getRosebudToken=this.getRosebudToken.bind(this),this.set=this.set.bind(this),this.clear=this.clear.bind(this),this._handleStorageChange=this._handleStorageChange.bind(this),window.addEventListener("storage",this._handleStorageChange),this.load()}}let s=new r},86786:(e,t,a)=>{a.d(t,{l:()=>n});let n=(0,a(65453).v)(e=>({authStatus:"INITIAL",emailInputErrorMessage:"",dialogOpen:!1,authEmailRedirectUrl:"",authMessage:null,setAuthStatus:t=>e({authStatus:t}),setEmailInputErrorMessage:t=>e({emailInputErrorMessage:t}),setDialogOpen:t=>e({dialogOpen:t}),handleSuccessfulLogin:()=>{},setSuccessfulLoginHandler:t=>e({handleSuccessfulLogin:t}),setAuthEmailRedirectUrl:t=>e({authEmailRedirectUrl:t}),setAuthMessage:(t,a)=>e({authMessage:{type:t,content:a}}),clearAuthMessage:()=>e({authMessage:null})}))},88248:(e,t,a)=>{a.d(t,{AO:()=>K,BL:()=>f,CM:()=>z,DS:()=>b,HW:()=>d,Ii:()=>C,Mz:()=>q,NH:()=>j,Os:()=>m,RL:()=>R,Rc:()=>I,TK:()=>O,U1:()=>g,Uf:()=>G,Uu:()=>h,V1:()=>J,Y7:()=>w,_5:()=>T,aw:()=>Z,cf:()=>x,em:()=>U,gT:()=>N,gt:()=>$,iD:()=>y,jd:()=>S,kO:()=>M,kW:()=>Q,kY:()=>P,ln:()=>V,mP:()=>v,n8:()=>D,nK:()=>H,oh:()=>p,qB:()=>B,rJ:()=>E,rU:()=>_,rr:()=>F,sM:()=>L,tK:()=>W,uS:()=>X,vr:()=>k,wL:()=>Y,xx:()=>A});var n=a(23464),r=a(35695),s=a(71086);let i=n.A.create({baseURL:"https://playground-gateway-v2-snduoq54tq-uc.a.run.app",paramsSerializer:{indexes:null}}),o=null;async function u(){let e=s.J.getRosebudToken();if(!e)return Promise.reject(Error("Token expired."));if(s.J.isAccessTokenExpired()){if(o)return await o;if(s.J.isRefreshTokenExpired())return Promise.reject(Error("Token expired."));o=y({refresh:e.refresh});try{let{access:t}=await o;return s.J.set({access:t,refresh:e.refresh}),{access:t}}finally{o=null}}return{access:e.access}}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let{access:a}=await u();return t.headers={...t.headers,Authorization:"Bearer ".concat(a)},await i(e,t)}catch(e){var a;throw n.A.isAxiosError(e)&&(null==(a=e.response)?void 0:a.status)===404&&(0,r.notFound)(),e}}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.headers={...t.headers,"Content-Type":"application/json"},await i(e,t)}async function d(){return(await l("/api/users/me/",{method:"GET"})).data}async function p(e){return(await l("/api/entitlements/".concat(e,"/"),{method:"GET"})).data}async function h(e){return(await c("/api/token/sign-in/",{method:"POST",data:e})).data}async function m(){return(await c("/api/token/sign-in-anonymous/",{method:"POST"})).data}async function y(e){return(await c("/api/token/refresh/",{method:"POST",data:e})).data}async function g(e){return void 0===e?Promise.reject(Error("Invalid id")):(await l("/api/projects/".concat(e,"/"),{method:"GET"})).data}async function f(e){return(await l("/api/published-projects/".concat(e,"/clone/"),{method:"POST"})).data}async function T(e,t){await l("/api/projects/".concat(e,"/add_asset/"),{method:"POST",data:{asset_id:t}})}async function w(e,t){await l("/api/projects/".concat(e,"/remove_asset/"),{method:"POST",data:{asset_id:t}})}async function E(e){return(await l("/api/in-game/call-llm",{method:"POST",data:e})).data}async function v(e){return(await l("/api/in-game/generate-image",{method:"POST",data:e,responseType:"blob"})).data}async function _(e){await l("/api/plays/",{method:"POST",data:e})}async function k(e){let{id:t,...a}=e,n=a.preview_image?{"Content-Type":"multipart/form-data"}:void 0;return void 0===t?Promise.reject(Error("Invalid id")):(await l("/api/projects/".concat(t,"/"),{method:"PATCH",data:a,headers:n})).data}async function S(e,t){await l("/api/projects/".concat(e,"/set_current_revision/"),{method:"POST",data:t})}async function I(e,t){await l("/api/projects/".concat(e,"/publish_revision/"),{method:"POST",data:{revision_id:t}})}async function b(e,t){return(await l("/api/projects/".concat(e,"/deploy_revision/"),{method:"POST",data:{revision_id:t}})).data}async function O(e){return(await l("/api/users/".concat(e.id,"/"),{method:"PATCH",data:e})).data}async function A(e){if(void 0===e)return Promise.reject(Error("Invalid id"));await l("/api/projects/".concat(e,"/"),{method:"DELETE"})}async function x(e){return(await l("/api/projects/",{method:"GET",params:e})).data}async function P(e){return(await c("api/published-projects/",{method:"GET",params:e})).data}async function N(e){return(await l("/api/assets/".concat(e.id,"/"),{method:"PATCH",data:e})).data}async function j(e){return(await l("/api/assets/",{method:"GET",params:e})).data}async function q(e){let t=new FormData;return t.append("description",e.description),t.append("blob",e.blob),e.preview_blob&&t.append("preview_blob",e.preview_blob),(await l("/api/assets/upload/",{method:"POST",data:t})).data}async function K(e){await l("/api/assets/".concat(e.id,"/"),{method:"DELETE"})}async function C(e){return(await l("/api/assets/generate/",{method:"POST",data:e})).data}async function L(e){return(await l("/api/asset-generation-models/",{method:"GET",params:e})).data}async function F(e){return(await l("/api/chats/",{method:"GET",params:e})).data}async function R(e){return(await l("/api/chats/",{method:"POST",data:e})).data}async function U(e){return(await l("/api/commits/",{method:"GET",params:e})).data}async function M(e){return(await l("/api/commits/".concat(e,"/"),{method:"GET"})).data}async function D(e){await l("/api/commits/".concat(e,"/"),{method:"DELETE"})}async function Y(e){await l("/api/commits/bulk_delete/",{method:"PATCH",data:{ids:e}})}async function G(e){return(await l("/api/files/",{method:"POST",data:e})).data}async function J(e){let{id:t,...a}=e;return(await l("/api/files/".concat(t,"/"),{method:"PATCH",data:a})).data}async function Q(e){return(await l("/api/files/".concat(e,"/"),{method:"GET"})).data}async function H(e){return(await l("/api/files/",{method:"GET",params:e})).data}async function $(e){return(await l("/api/revisions/",{method:"GET",params:e})).data}async function B(e){return(await l("/api/revisions/".concat(e,"/"),{method:"GET"})).data}async function z(e){return(await l("/api/revisions/",{method:"POST",data:e})).data}async function W(e){let{id:t,...a}=e;return(await l("/api/revisions/".concat(t,"/"),{method:"PATCH",data:a})).data}async function V(e){await l("/api/revisions/".concat(e,"/"),{method:"DELETE"})}async function X(){return(await l("/api/subscriptions",{method:"GET"})).data}async function Z(e){return(await l("/api/subscriptions",{method:"PATCH",data:{products:{},active_product_and_price:[e.product_id,e.price_id],referral_id:e.referral_id}})).headers["x-link"]||null}},99975:(e,t,a)=>{a.d(t,{F:()=>I,Pp:()=>k,Rw:()=>b,Ty:()=>f,YH:()=>E,_l:()=>_,e7:()=>o,eO:()=>h,h2:()=>m,hd:()=>S,lB:()=>d,mO:()=>p,mR:()=>y,n1:()=>v,nF:()=>g,qM:()=>T,u_:()=>c,v9:()=>w,yu:()=>u});var n=a(86864),r=a(23915),s=a(16203);let i=(0,r.Wp)({apiKey:"AIzaSyBf_rz3aBYRJp4xDN9qYEU1XJKLq9n5l_g",authDomain:"auth.rosebud.ai",projectId:"playground-ad6bc",storageBucket:"playground-ad6bc.appspot.com",messagingSenderId:"978544999762",appId:"1:978544999762:web:216673e705db232b70ce8b"}),o=(0,s.xI)(i);async function u(){var e;return await (null==(e=o.currentUser)?void 0:e.getIdToken())}let l=null;(0,n.TT)().then(e=>{e?(l=(0,n.P5)(i),(0,s.hg)(o,e=>{e&&l?(0,n.do)(l,e.uid):l&&(0,n.do)(l,null)})):console.warn("[Firebase Analytics] Not supported in ".concat("production"," environment (").concat("client-side",") - Module: firebase.ts"))});let c=()=>{l&&(0,n.$s)(l,"websocket-submit-prompt")},d=()=>{l&&(0,n.$s)(l,"one-shot-submit-prompt")},p=e=>{l&&(0,n.$s)(l,"submit-character-message",{projectId:e})},h=e=>{l&&(0,n.$s)(l,"generate-asset",e)},m=()=>{l&&(0,n.$s)(l,"sign-in")},y=()=>{l&&(0,n.$s)(l,"sign-out")},g=e=>{l&&(0,n.$s)(l,"sign-in-error",{error:e})},f=()=>{l&&(0,n.$s)(l,"copy-code")},T=()=>{l&&(0,n.$s)(l,"apply-code")},w=()=>{l&&(0,n.$s)(l,"auto-apply-code")},E=e=>{l&&(0,n.$s)(l,"ogp-submit-points",{points:e})},v=(e,t)=>{l&&(0,n.$s)(l,e,t)},_=()=>{l&&(0,n.$s)(l,"one-shot-attempt")},k=()=>{l&&(0,n.$s)(l,"commit-stream-complete")},S=()=>{l&&(0,n.$s)(l,"publish-revision")},I=()=>{l&&(0,n.$s)(l,"deploy-revision")},b=e=>{l&&(0,n.$s)(l,"dimension-select",{dimension:e})}}}]);